import{r as m,j as e}from"./react-Dzin6bBt.js";import{I as i}from"./input-32XKOxJz.js";import{c as h,u as S,a as x}from"./index-DpXcwLNw.js";import{B as M}from"./button-DZ378MbE.js";import{C as $}from"./card-amCQYW8t.js";import{c as F}from"./class-variance-authority-Bb4qSo10.js";import{L as E}from"./Loader-BO7wm5pM.js";import{T as G}from"./textarea-D0qLsvgj.js";import{A as U}from"./AlertDialogDemo-Cwr-nFqh.js";import{S as f,a as j,b as v,c as b}from"./select-Boagh-5N.js";import{c as q,g as O}from"./react-router-ZyCTy2W0.js";import"./exenv-BTN8Bl8p.js";import"./react-dom-vuVZB_ht.js";import"./scheduler-CzFDRTuY.js";import"./react-router-dom-C6AuuY1s.js";import"./@remix-run--NbqtF80.js";import"./axios-CCb-kr4I.js";import"./@radix-ui-BiFA3u8r.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-Bffst3Sv.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-C0y-sxxv.js";import"./react-style-singleton-CNUZfl4K.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-BgPSE0Zt.js";import"./use-callback-ref-CM22xisT.js";import"./@floating-ui-B50KHoMa.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-Dnoi3Axr.js";import"./lucide-react-DVh0U7qo.js";const R=F("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),N=m.forwardRef(({className:n,variant:c,...r},l)=>e.jsx("div",{ref:l,role:"alert",className:h(R({variant:c}),n),...r}));N.displayName="Alert";const V=m.forwardRef(({className:n,...c},r)=>e.jsx("h5",{ref:r,className:h("mb-1 font-medium leading-none tracking-tight",n),...c}));V.displayName="AlertTitle";const W=m.forwardRef(({className:n,...c},r)=>e.jsx("div",{ref:r,className:h("text-sm [&_p]:leading-relaxed",n),...c}));W.displayName="AlertDescription";function ue(){const{user:n,setNotification:c}=S(),r=q();m.useEffect(()=>{n.role==="owner"||n.role==="admin"||r("/404")});const{id:l}=O(),[s,o]=m.useState({title:"",money:"",description:"",dateTime:y(),whoToTake:"",ToGivemoney:"",toDaydate:y(),toTakeDate:y(),category:"deposite",moneyType:"cash"}),[d,k]=m.useState({}),[u,p]=m.useState(!1),[T,w]=m.useState(!1),D=["deposite","withdraw","remaining"],C=["cash","online"];m.useEffect(()=>{l&&(async()=>{p(!0);try{const t=await x.get(`/money-management/${l}`);o(t.data)}catch(t){c(t.message),w(!0)}finally{p(!1)}})()},[l]);const A=async a=>{a.preventDefault(),p(!0);try{l?(await x.put(`/money-management/${l}`,s),c("Data was successfully updated")):(await x.post("/money-management",s),c("Data was successfully saved")),r("/money-management")}catch(t){p(!1);const g=t.response;g&&g.status===422&&(k(g.data.errors),c("Failed to save data"))}};return e.jsxs("div",{className:"flex flex-col items-center min-h-screen p-4 bg-gray-100 dark:bg-gray-900",children:[e.jsxs($,{className:"w-full max-w-md p-8 bg-white dark:bg-gray-800 text-black dark:text-white",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-6 text-center",children:l?`Edit ${s.category.charAt(0).toUpperCase()+s.category.slice(1)}`:`New ${s.category.charAt(0).toUpperCase()+s.category.slice(1)} Entry`}),u&&e.jsx(E,{}),d&&Object.keys(d).length>0&&e.jsx(N,{variant:"error",className:"mb-4",children:Object.keys(d).map(a=>e.jsx("p",{children:d[a][0]},a))}),!u&&e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200",children:"Money Type"}),e.jsxs(f,{value:s.category,onValueChange:a=>o(t=>({...t,category:a})),className:"mt-1 block w-full",children:[e.jsx(j,{children:e.jsx("span",{children:s.category.charAt(0).toUpperCase()+s.category.slice(1)})}),e.jsx(v,{children:D.map(a=>e.jsx(b,{value:a,children:a.charAt(0).toUpperCase()+a.slice(1)},a))})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Title"}),e.jsx(i,{type:"text",value:s.title,onChange:a=>o(t=>({...t,title:a.target.value})),placeholder:"Title",required:!0,className:"w-full mt-1"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Description"}),e.jsx(G,{value:s.description,onChange:a=>o(t=>({...t,description:a.target.value})),placeholder:"Description",rows:"4",className:"w-full p-2 border mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200",children:"Money Type"}),e.jsxs(f,{value:s.moneyType,onValueChange:a=>o(t=>({...t,moneyType:a})),className:"mt-1 block w-full",children:[e.jsx(j,{children:e.jsx("span",{children:s.moneyType||"---select---"})}),e.jsx(v,{children:C.map(a=>e.jsx(b,{value:a,children:a.charAt(0).toUpperCase()+a.slice(1)},a))})]})]}),s.category==="deposite"&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Total Money"}),e.jsx(i,{type:"number",value:s.money,onChange:a=>o(t=>({...t,money:a.target.value})),placeholder:"Total Money",required:!0,className:"w-full mt-1"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Who to Take"}),e.jsx(i,{type:"text",value:s.whoToTake,onChange:a=>o(t=>({...t,whoToTake:a.target.value})),placeholder:"Who to Take",className:"w-full mt-1"})]})]}),s.category==="withdraw"&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Money"}),e.jsx(i,{type:"number",value:s.money,onChange:a=>o(t=>({...t,money:a.target.value})),placeholder:"Money",required:!0,className:"w-full mt-1"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"To Give Money"}),e.jsx(i,{type:"text",value:s.ToGivemoney,onChange:a=>o(t=>({...t,ToGivemoney:a.target.value})),placeholder:"To Give Money",className:"w-full mt-1"})]})]}),s.category==="remaining"&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Money"}),e.jsx(i,{type:"number",value:s.money,onChange:a=>o(t=>({...t,money:a.target.value})),placeholder:"Money",required:!0,className:"w-full mt-1"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Who to Take"}),e.jsx(i,{type:"text",value:s.whoToTake,onChange:a=>o(t=>({...t,whoToTake:a.target.value})),placeholder:"Who to Take",className:"w-full mt-1"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"To Take Date"}),e.jsx(i,{type:"date",value:s.toTakeDate,onChange:a=>o(t=>({...t,toTakeDate:a.target.value})),placeholder:"To Take Date",className:"w-full mt-1"})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Today Date"}),e.jsx(i,{type:"date",value:s.toDaydate,onChange:a=>o(t=>({...t,toDaydate:a.target.value})),placeholder:"To Give Date",className:"w-full mt-1"})]}),e.jsx(M,{type:"submit",className:"mt-4",children:l?"Update":"Submit"})]})]}),e.jsx(U,{open:T,onClose:()=>r("/money"),onConfirm:()=>window.location.reload(),description:"Failed to fetch data. Please try again or go to the home page."})]})}function y(){const n=new Date,c=n.getFullYear();let r=n.getMonth()+1,l=n.getDate();return l<10&&(l=`0${l}`),r<10&&(r=`0${r}`),`${c}-${r}-${l}`}export{ue as default};
