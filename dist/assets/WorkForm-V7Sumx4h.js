import{r as a,j as e}from"./react-Dzin6bBt.js";import{u as P,a as c}from"./index-BRKcmzoU.js";import{T as $}from"./textarea-DqH8UqOL.js";import{B as C}from"./button-DEuGr3my.js";import{I as d}from"./input-DNM5Pwah.js";import{S as I,a as L,b as H,c as o}from"./select-DYJvg2A2.js";import{c as M,g as B,d as W}from"./react-router-CsBO2-kY.js";import"./exenv-BTN8Bl8p.js";import"./react-dom-vuVZB_ht.js";import"./scheduler-CzFDRTuY.js";import"./react-router-dom-BJiSrDzD.js";import"./@remix-run-CDTKzl14.js";import"./axios-CCb-kr4I.js";import"./@radix-ui-BiFA3u8r.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-Bffst3Sv.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-C0y-sxxv.js";import"./react-style-singleton-CNUZfl4K.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-BgPSE0Zt.js";import"./use-callback-ref-CM22xisT.js";import"./@floating-ui-B50KHoMa.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-Dnoi3Axr.js";import"./lucide-react-DVh0U7qo.js";import"./class-variance-authority-Bb4qSo10.js";function pe(){const{user:u}=P(),r=M();a.useEffect(()=>{u.role==="owner"||u.role==="admin"||r("/404")});const[w,x]=a.useState(""),[y,h]=a.useState(""),[S,p]=a.useState(new Date().toISOString().split("T")[0]),[k,g]=a.useState("13:00"),[N,b]=a.useState("14:00"),[f,j]=a.useState("Collage"),[F,l]=a.useState(!1),[s,v]=a.useState("create"),{id:i}=B(),n=W().pathname,m=t=>t.slice(0,5);a.useEffect(()=>{n.includes("/new")?v("create"):n.includes("/edit")?(v("update"),i&&(l(!0),c.get(`/works/${i}`).then(({data:t})=>{l(!1),x(t.title||""),h(t.description||""),p(t.Today_date||""),g(m(t.start_time)||"13:00"),b(m(t.end_time)||"14:00"),j(t.category||"Collage")}).catch(()=>{l(!1)}))):n.includes("/")&&(v("show"),i&&(l(!0),c.get(`/works/${i}`).then(({data:t})=>{l(!1),x(t.title||""),h(t.description||""),p(t.Today_date||""),g(m(t.start_time)||"13:00"),b(m(t.end_time)||"14:00"),j(t.category||"Collage")}).catch(()=>{l(!1)})))},[n,i]);const T=t=>{t.preventDefault();let _={title:w,description:y,Today_date:S,start_time:k,end_time:N,category:f};const E=s==="update"?`/works/${i}`:"/works";(s==="update"?c.put:c.post)(E,_).then(()=>r("/work")).catch(D=>console.error(s==="update"?"Error updating work":"Error creating work",D))};return e.jsx("div",{className:"p-4 max-w-6xl mx-auto",children:e.jsxs("form",{onSubmit:T,className:"mt-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),e.jsxs(I,{value:f,onValueChange:t=>j(t),className:"mt-1 block w-full",disabled:s==="show",children:[e.jsx(L,{children:e.jsx("span",{children:f||"---select---"})}),e.jsxs(H,{children:[e.jsx(o,{value:"Collage",children:"Collage"}),e.jsx(o,{value:"Coding",children:"Coding"}),e.jsx(o,{value:"HomeWork",children:"HomeWork"}),e.jsx(o,{value:"Soical_Media",children:"Soical Media"}),e.jsx(o,{value:"Playing",children:"Playing"}),e.jsx(o,{value:"Self_Learning",children:"Self Learning"}),e.jsx(o,{value:"Data_Scinece",children:"Data Scinece"}),e.jsx(o,{value:"Time_Pass",children:"Time Pass"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"title"}),e.jsx(d,{type:"text",value:w,onChange:t=>x(t.target.value),className:"mt-1",disabled:s==="show"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx($,{value:y,onChange:t=>h(t.target.value),className:"mt-1",disabled:s==="show"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Time"}),e.jsx(d,{type:"time",value:k,onChange:t=>g(t.target.value),className:"mt-1",disabled:s==="show"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Time"}),e.jsx(d,{type:"time",value:N,onChange:t=>b(t.target.value),className:"mt-1",disabled:s==="show"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Today Date"}),e.jsx(d,{type:"date",value:S,onChange:t=>p(t.target.value),className:"mt-1",disabled:s==="show"})]}),e.jsxs("div",{className:"flex space-x-4",children:[u.name==="dhruvish"&&e.jsx(C,{type:s==="show"?"button":"submit",className:"bg-blue-500 text-white hover:bg-blue-600 w-[100px]",onClick:()=>s==="show"&&r(`/work/${i}/edit`),children:s==="update"?"Update work":s=="show"?"Edit":"Create work"}),e.jsx(C,{type:"button",className:"bg-gray-500 text-white hover:bg-gray-600 w-[100px]",onClick:()=>r("/work"),children:"Go To Home"})]})]})})}export{pe as default};
