const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/@splinetool-BYKGjNdS.js","assets/react-CUNypTLm.js","assets/lodash.debounce-DxsJFFOk.js","assets/react-merge-refs-Bf2qc8Rt.js"])))=>i.map(i=>d[i]);
import{R as oe,j as e,r as a}from"./react-CUNypTLm.js";import{c as rt}from"./react-dom-gI84VxL6.js";import{L,c as ot,R as nt}from"./react-router-dom-lsgLTpiU.js";import{_ as we}from"./@splinetool-BYKGjNdS.js";import{a as it}from"./axios-C8DqakIB.js";import{S as ye,a as be,P as ct,C as ve,I as Ne,b as Ce,c as ke,R as Se,L as Te,d as De,e as dt,T as mt,f as ut,g as xt,O as Ee,h as Re,i as Le,D as Ae,A as _e,j as $e,k as ht,l as pt,m as Me,n as gt,o as Ie,p as Oe,q as ft,r as Pe,V as jt,s as Ve,t as Fe,u as wt,v as yt,w as Ue,x as bt}from"./@radix-ui-DBluXQPO.js";import{c as vt}from"./clsx-B-dksMZM.js";import{t as Nt}from"./tailwind-merge-BOZU2X2x.js";import{C as Ct,a as He,b as kt,X as St,M as Tt,c as ze,d as Dt}from"./lucide-react-DYjpGbM2.js";import{f as ne,O as We,c as I,g as G,d as ie}from"./react-router-BbegT9eR.js";import{c as qe}from"./class-variance-authority-Bb4qSo10.js";import{u as ce,f as q,c as de,g as me,a as ue}from"./@tanstack-DWyurbQt.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-DXtzjFCd.js";import"./lodash.debounce-DxsJFFOk.js";import"./react-merge-refs-Bf2qc8Rt.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-V80fDyCV.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-2fRQbrNK.js";import"./react-style-singleton-gMSzz8Q8.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-D7xp7Rkc.js";import"./use-callback-ref-D63zASqx.js";import"./@floating-ui-DcG9JAQy.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))n(c);new MutationObserver(c=>{for(const m of c)if(m.type==="childList")for(const j of m.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&n(j)}).observe(document,{childList:!0,subtree:!0});function l(c){const m={};return c.integrity&&(m.integrity=c.integrity),c.referrerPolicy&&(m.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?m.credentials="include":c.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function n(c){if(c.ep)return;c.ep=!0;const m=l(c);fetch(c.href,m)}})();const Et=oe.lazy(()=>we(()=>import("./@splinetool-BYKGjNdS.js").then(t=>t.r),__vite__mapDeps([0,1,2,3])));function Rt(){return e.jsx("div",{className:"container mx-auto p-4 bg-[#000] h-screen",children:e.jsxs("div",{className:"grid md:grid-cols-2 grid-cols-1 gap-4 h-full",children:[e.jsx("div",{className:"flex items-center justify-center h-screen",children:e.jsx("h1",{className:"text-5xl md:text-6xl text-white text-center",children:"Welcome to ..."})}),e.jsx("div",{className:"h-screen",children:e.jsx(a.Suspense,{fallback:e.jsx("div",{className:"text-white text-center",children:"Loading 3D scene..."}),children:e.jsx(Et,{scene:"https://prod.spline.design/WPefJcKBe5fNXrbV/scene.splinecode"})})})]})})}const N=it.create({baseURL:"https://api.my.thedhruvish.com/api"});N.interceptors.request.use(t=>{const s=localStorage.getItem("ACCESS_TOKEN");return t.headers.Authorization=`Bearer ${s}`,t});N.interceptors.response.use(t=>t,t=>{const{response:s}=t;throw s.status===401?(localStorage.removeItem("ACCESS_TOKEN"),window.location.reload()):s.status,t});const he="36000000",Lt=3e5,Ge=a.createContext({currentUser:null,token:null,notification:null,setUser:()=>{},setToken:()=>{},setNotification:()=>{}}),At=({children:t})=>{const[s,l]=a.useState({}),[n,c]=a.useState(localStorage.getItem("ACCESS_TOKEN")),[m,j]=a.useState(""),[g,w]=a.useState(!1),f=y=>{c(y),y?localStorage.setItem("ACCESS_TOKEN",y):localStorage.removeItem("ACCESS_TOKEN")},k=y=>{j(y),setTimeout(()=>{j("")},2e3)};return a.useEffect(()=>{let y;const u=()=>{clearTimeout(y),y=setTimeout(()=>{g||(w(!0),N.post("/logout").then(()=>{f(null),window.location.href="/login"}))},he)},d=()=>{if(sessionStorage.getItem("lastActivity")){const o=Number(sessionStorage.getItem("lastActivity"));Date.now()-o>he&&(g||(w(!0),N.post("/logout").then(()=>{f(null),window.location.href="/login"})))}sessionStorage.setItem("lastActivity",Date.now()),u()},T=()=>{sessionStorage.setItem("lastPageHideTime",Date.now())},x=()=>{const o=Number(sessionStorage.getItem("lastPageHideTime"));Date.now()-o>Lt&&(localStorage.removeItem("ACCESS_TOKEN"),f(null))};return window.addEventListener("pagehide",T),window.addEventListener("pageshow",x),window.addEventListener("mousemove",d),window.addEventListener("keydown",d),d(),()=>{clearTimeout(y),window.removeEventListener("pagehide",T),window.removeEventListener("pageshow",x),window.removeEventListener("mousemove",d),window.removeEventListener("keydown",d)}},[f,g]),e.jsx(Ge.Provider,{value:{user:s,setUser:l,token:n,setToken:f,notification:m,setNotification:k},children:t})},M=()=>a.useContext(Ge);function v(...t){return Nt(vt(t))}const _t=dt,$t=mt,Mt=ut,It=a.forwardRef(({className:t,inset:s,children:l,...n},c)=>e.jsxs(ye,{ref:c,className:v("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",t),...n,children:[l,e.jsx(Ct,{className:"ml-auto h-4 w-4"})]}));It.displayName=ye.displayName;const Ot=a.forwardRef(({className:t,...s},l)=>e.jsx(be,{ref:l,className:v("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...s}));Ot.displayName=be.displayName;const Be=a.forwardRef(({className:t,sideOffset:s=4,...l},n)=>e.jsx(ct,{children:e.jsx(ve,{ref:n,sideOffset:s,className:v("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...l})}));Be.displayName=ve.displayName;const Pt=a.forwardRef(({className:t,inset:s,...l},n)=>e.jsx(Ne,{ref:n,className:v("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",t),...l}));Pt.displayName=Ne.displayName;const Vt=a.forwardRef(({className:t,children:s,checked:l,...n},c)=>e.jsxs(Ce,{ref:c,className:v("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:l,...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ke,{children:e.jsx(He,{className:"h-4 w-4"})})}),s]}));Vt.displayName=Ce.displayName;const re=a.forwardRef(({className:t,children:s,...l},n)=>e.jsxs(Se,{ref:n,className:v("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ke,{children:e.jsx(kt,{className:"h-2 w-2 fill-current"})})}),s]}));re.displayName=Se.displayName;const Ft=a.forwardRef(({className:t,inset:s,...l},n)=>e.jsx(Te,{ref:n,className:v("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...l}));Ft.displayName=Te.displayName;const Ut=a.forwardRef(({className:t,...s},l)=>e.jsx(De,{ref:l,className:v("-mx-1 my-1 h-px bg-muted",t),...s}));Ut.displayName=De.displayName;function Ht(){const{user:t,token:s,setUser:l,setToken:n,notification:c}=M(),[m,j]=a.useState("dark"),[g,w]=a.useState(!1);a.useEffect(()=>{s&&N.get("/user").then(({data:y})=>{l(y)})},[s]),a.useEffect(()=>{document.documentElement.classList.toggle("dark",m==="dark")},[m]);const f=y=>{y.preventDefault(),N.post("/logout").then(()=>{l({}),n(null)})},k=()=>{w(!g)};return e.jsx(e.Fragment,{children:s?e.jsxs("div",{id:"defaultLayout",className:"flex flex-col min-h-screen",children:[e.jsxs("header",{className:"flex flex-wrap justify-between items-center p-4  ",children:[e.jsxs("div",{className:"flex justify-between w-full sm:w-auto  xl:gap-2 ",children:[e.jsx("div",{children:e.jsx(L,{to:"/dashboard",className:"hover:underline",children:"Dashboard"})}),e.jsx(L,{onClick:f,className:"btn-logout hover:underline text-red-600 ",children:"Logout"}),e.jsx("button",{className:"sm:hidden p-2",onClick:k,children:g?e.jsx(St,{className:"h-6 w-6"}):e.jsx(Tt,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:`flex-col sm:flex-row sm:flex sm:items-center space-y-2 sm:space-y-0 sm:space-x-4 ${g?"flex":"hidden"} sm:flex w-full sm:w-auto`,children:[e.jsx(L,{to:"/row",className:"hover:underline",children:"Row Items"}),(t.role==="owner"||t.role==="admin")&&e.jsxs(e.Fragment,{children:[e.jsx(L,{to:"/science",className:"hover:underline",children:"Data Science Lecturers"}),e.jsx(L,{to:"/log",className:"hover:underline",children:"Log"}),e.jsx(L,{to:"/money",className:"hover:underline",children:"Money"}),e.jsx(L,{to:"/work",className:"hover:underline",children:"Work"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs(_t,{children:[e.jsx($t,{className:"flex items-center p-2  rounded-md ",children:"Theme"}),e.jsx(Be,{children:e.jsxs(Mt,{value:m,onValueChange:j,children:[e.jsx(re,{value:"dark",children:"Dark Mode"}),e.jsx(re,{value:"light",children:"Light Mode"})]})})]}),e.jsx("span",{children:t.name})]})]})]}),e.jsx("main",{className:"flex-1 p-4 bg-gray-100 dark:bg-gray-900",children:e.jsx(We,{})}),c&&e.jsx("div",{className:"fixed bottom-4 right-4 p-4 bg-gray-800 text-white rounded-lg shadow-lg",children:c})]}):e.jsx(ne,{to:"/login"})})}function zt(){const{user:t,token:s}=M();return s?e.jsx(ne,{to:"/"}):e.jsx("div",{id:"guestLayout",children:e.jsx(We,{})})}const S=a.forwardRef(({className:t,type:s,...l},n)=>e.jsx("input",{type:s,className:v("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...l}));S.displayName="Input";const xe=qe("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),R=a.forwardRef(({className:t,variant:s,size:l,asChild:n=!1,...c},m)=>{const j=n?xt:"button";return e.jsx(j,{className:v(xe({variant:s,size:l,className:t})),ref:m,...c})});R.displayName="Button";function Wt(){const t=a.useRef(),s=a.useRef(),{setUser:l,setToken:n}=M(),[c,m]=a.useState(null),[j,g]=a.useState(!1),w=f=>{f.preventDefault(),g(!0);const k=navigator.userAgent;let y={};"userAgentData"in navigator?navigator.userAgentData.getHighEntropyValues(["platform","brands"]).then(u=>(y={platform:navigator.platform,language:navigator.language,online:navigator.onLine,screenWidth:window.screen.width,screenHeight:window.screen.height,cookiesEnabled:navigator.cookieEnabled,hardwareConcurrency:navigator.hardwareConcurrency,deviceMemory:navigator.deviceMemory,brands:u.brands.map(d=>d.brand).join(", "),mobile:/Mobi|Android/i.test(navigator.userAgent)},N.get("https://ipinfo.io/json?token=9b203c2cebb8bc"))).then(({data:u})=>{const d={username:t.current.value,password:s.current.value,data:u,more:y};return console.log("Payload for login:",d),N.post("/login",d)}).then(({data:u})=>{l(u.user),n(u.token)}).catch(u=>{var d,T;console.error("Error during login:",u),m(((T=(d=u.response)==null?void 0:d.data)==null?void 0:T.message)||"Failed to log in. Please try again.")}).finally(()=>{g(!1)}):(console.log("User agent data is not supported in this browser."),m("User agent data is not supported in this browser."),N.get("/get-ipinfo").then(({data:u})=>{const d={...u,browser:k},T={username:t.current.value,password:s.current.value,data:d};return console.log("Fallback Payload for login:",T),N.post("/login",T)}).then(({data:u})=>{l(u.user),n(u.token)}).catch(u=>{var d,T;console.error("Error during fallback login:",u),m(((T=(d=u.response)==null?void 0:d.data)==null?void 0:T.message)||"Failed to log in. Please try again.")}).finally(()=>{g(!1)}))};return e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("div",{className:"w-[360px] relative z-10 bg-black max-w-[360px] p-8 shadow-sm",children:e.jsxs("form",{onSubmit:w,children:[e.jsx("h1",{className:"text-lg mb-4 text-center",children:"Login"}),e.jsx(S,{ref:t,type:"text",placeholder:"Enter your username",className:"block w-full mb-4 p-2 border rounded",name:"username",required:!0}),e.jsx(S,{ref:s,type:"password",placeholder:"Enter Password",className:"block w-full mb-4 p-2 border rounded",name:"password",required:!0}),e.jsx(R,{className:"w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-sky-700",disabled:j,children:j?"Logging in...":"Login"}),e.jsx("br",{}),c&&e.jsx("div",{className:"mt-4 text-[#ae1212] text-base text-center",children:e.jsx("p",{children:c})})]})})})}const qt=oe.lazy(()=>we(()=>import("./@splinetool-BYKGjNdS.js").then(t=>t.r),__vite__mapDeps([0,1,2,3]))),pe=()=>{const t=I();return e.jsxs("div",{className:"flex flex-col lg:flex-row h-screen bg-gray-100 dark:bg-[#000]",children:[e.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:e.jsx(a.Suspense,{fallback:e.jsx("div",{children:"Loading 3D scene..."}),children:e.jsx(qt,{scene:"https://prod.spline.design/loRLoFfjLvL0qwbO/scene.splinecode",onError:s=>console.error("Spline loading error:",s)})})}),e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-center space-y-6 p-6",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800 dark:text-white",children:"Not Found"}),e.jsx(R,{className:"mt-6",onClick:()=>t("/"),children:"Go Back Home"})]})]})},P=a.forwardRef(({className:t,...s},l)=>e.jsx("div",{ref:l,className:v("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));P.displayName="Card";const Gt=a.forwardRef(({className:t,...s},l)=>e.jsx("div",{ref:l,className:v("flex flex-col space-y-1.5 p-6",t),...s}));Gt.displayName="CardHeader";const Bt=a.forwardRef(({className:t,...s},l)=>e.jsx("h3",{ref:l,className:v("text-2xl font-semibold leading-none tracking-tight",t),...s}));Bt.displayName="CardTitle";const Kt=a.forwardRef(({className:t,...s},l)=>e.jsx("p",{ref:l,className:v("text-sm text-muted-foreground",t),...s}));Kt.displayName="CardDescription";const Qt=a.forwardRef(({className:t,...s},l)=>e.jsx("div",{ref:l,className:v("p-6 pt-0",t),...s}));Qt.displayName="CardContent";const Jt=a.forwardRef(({className:t,...s},l)=>e.jsx("div",{ref:l,className:v("flex items-center p-6 pt-0",t),...s}));Jt.displayName="CardFooter";function Xt(){const t=a.createRef(),s=a.createRef(),l=a.createRef(),n=a.createRef(),c=a.createRef(),{setUser:m,setToken:j}=M(),[g,w]=a.useState(null),f=k=>{k.preventDefault();const y={name:t.current.value,username:l.current.value,email:s.current.value,password:n.current.value,password_confirmation:c.current.value};N.post("/signup",y).then(({data:u})=>{m(u.user),j(u.token)}).catch(u=>{const d=u.response;d&&d.status===422&&w(d.data.errors)})};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col items-center min-h-screen p-4 bg-gray-100 dark:bg-gray-900",children:e.jsxs(P,{className:"w-full max-w-md p-8 bg-white dark:bg-gray-800 text-black dark:text-white",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-6 text-center",children:"Signup"}),g&&Object.keys(g).length>0&&e.jsx("div",{className:"mb-4 p-4 border border-red-500 text-red-500 rounded",children:Object.keys(g).map(k=>e.jsx("p",{children:g[k][0]},k))}),e.jsxs("form",{onSubmit:f,className:"space-y-4",children:[e.jsx(S,{type:"text",ref:t,placeholder:"Name",required:!0,className:"w-full"}),e.jsx(S,{type:"text",ref:l,placeholder:"username",required:!0,className:"w-full"}),e.jsx(S,{type:"email",ref:s,placeholder:"Email",required:!0,className:"w-full"}),e.jsx(S,{type:"password",ref:n,placeholder:"Password",className:"w-full"}),e.jsx(S,{type:"password",ref:c,placeholder:"Password Confirmation",className:"w-full"})]})]})})})}function z({className:t}){return e.jsx("div",{className:`flex items-center justify-center ${t}`,children:e.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{d:"M4 12a8 8 0 018-8v8h8a8 8 0 01-8 8h-8v-8z",fill:"currentColor"})]})})}const Yt=pt,Zt=ht,Ke=a.forwardRef(({className:t,...s},l)=>e.jsx(Ee,{className:v("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:l}));Ke.displayName=Ee.displayName;const Qe=a.forwardRef(({className:t,...s},l)=>e.jsxs(Zt,{children:[e.jsx(Ke,{}),e.jsx(Re,{ref:l,className:v("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));Qe.displayName=Re.displayName;const Je=({className:t,...s})=>e.jsx("div",{className:v("flex flex-col space-y-2 text-center sm:text-left",t),...s});Je.displayName="AlertDialogHeader";const Xe=({className:t,...s})=>e.jsx("div",{className:v("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});Xe.displayName="AlertDialogFooter";const Ye=a.forwardRef(({className:t,...s},l)=>e.jsx(Le,{ref:l,className:v("text-lg font-semibold",t),...s}));Ye.displayName=Le.displayName;const Ze=a.forwardRef(({className:t,...s},l)=>e.jsx(Ae,{ref:l,className:v("text-sm text-muted-foreground",t),...s}));Ze.displayName=Ae.displayName;const et=a.forwardRef(({className:t,...s},l)=>e.jsx(_e,{ref:l,className:v(xe(),t),...s}));et.displayName=_e.displayName;const tt=a.forwardRef(({className:t,...s},l)=>e.jsx($e,{ref:l,className:v(xe({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));tt.displayName=$e.displayName;function B({open:t,onClose:s,title:l,onConfirm:n,description:c}){return e.jsx(Yt,{open:t,onOpenChange:s,children:e.jsxs(Qe,{children:[e.jsxs(Je,{children:[e.jsx(Ye,{children:l}),e.jsx(Ze,{children:c})]}),e.jsxs(Xe,{children:[e.jsx(tt,{onClick:s,children:"Cancel"}),e.jsx(et,{onClick:n,children:"Continue"})]})]})})}function es(){const{user:t,setNotification:s}=M();I();const[l,n]=a.useState([]),[c,m]=a.useState(!1),[j,g]=a.useState(null),[w,f]=a.useState(!1);a.useEffect(()=>{u()},[]);const k=d=>{g(d),f(!0)},y=()=>{j&&N.delete(`/users/${j.id}`).then(()=>{s("User was successfully deleted"),u()}).catch(()=>{s("Error deleting user")}),f(!1),g(null)},u=()=>{m(!0),N.get("/users").then(({data:d})=>{m(!1),n(d.data)}).catch(()=>{m(!1)})};return e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Users"}),e.jsx(L,{to:"/users/new",children:e.jsx(R,{className:"bg-blue-500 text-white hover:bg-blue-600",children:"Add New"})})]}),e.jsx(P,{className:"overflow-x-auto",children:c?e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx(z,{})}):e.jsx("div",{className:"relative overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ID"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"role"}),e.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Create Date"}),e.jsxs("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:[" ",t.name=="dhruvish"&&"Actions"," "]})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:l.map(d=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-gray-100",children:d.id}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:d.name}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:d.email}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:d.role}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:d.created_at}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium",children:t.name=="dhruvish"&&e.jsxs(e.Fragment,{children:[e.jsx(L,{to:"/users/"+d.id,className:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",children:"Edit"}),e.jsx(R,{className:"ml-4 bg-red-500 text-white hover:bg-red-600",onClick:()=>k(d),children:"Delete"})]})})]},d.id))})]})})}),e.jsx(B,{open:w,onClose:()=>f(!1),onConfirm:y,title:"Confirm Deletion",description:"Are you sure you want to delete this user? This action cannot be undone."})]})}const H=bt,V=a.forwardRef(({className:t,children:s,...l},n)=>e.jsxs(Me,{ref:n,className:v("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...l,children:[s,e.jsx(gt,{asChild:!0,children:e.jsx(ze,{className:"h-4 w-4 opacity-50"})})]}));V.displayName=Me.displayName;const st=a.forwardRef(({className:t,...s},l)=>e.jsx(Ie,{ref:l,className:v("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Dt,{className:"h-4 w-4"})}));st.displayName=Ie.displayName;const at=a.forwardRef(({className:t,...s},l)=>e.jsx(Oe,{ref:l,className:v("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ze,{className:"h-4 w-4"})}));at.displayName=Oe.displayName;const F=a.forwardRef(({className:t,children:s,position:l="popper",...n},c)=>e.jsx(ft,{children:e.jsxs(Pe,{ref:c,className:v("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",l==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:l,...n,children:[e.jsx(st,{}),e.jsx(jt,{className:v("p-1",l==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(at,{})]})}));F.displayName=Pe.displayName;const ts=a.forwardRef(({className:t,...s},l)=>e.jsx(Ve,{ref:l,className:v("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));ts.displayName=Ve.displayName;const C=a.forwardRef(({className:t,children:s,...l},n)=>e.jsxs(Fe,{ref:n,className:v("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...l,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(wt,{children:e.jsx(He,{className:"h-4 w-4"})})}),e.jsx(yt,{children:s})]}));C.displayName=Fe.displayName;const ss=a.forwardRef(({className:t,...s},l)=>e.jsx(Ue,{ref:l,className:v("-mx-1 my-1 h-px bg-muted",t),...s}));ss.displayName=Ue.displayName;function ge(){const t=I(),{id:s}=G(),[l,n]=a.useState({id:null,name:"",username:"",role:"null",email:"",password:"",password_confirmation:""}),[c,m]=a.useState({}),[j,g]=a.useState("null"),[w,f]=a.useState(!1),{setNotification:k}=M();a.useEffect(()=>{s&&(f(!0),N.get(`/users/${s}`).then(({data:u})=>{f(!1),n(u),g(u.role)}).catch(()=>{f(!1)}))},[s]),a.useEffect(()=>{document.documentElement.classList.add("dark")},[]);const y=u=>{u.preventDefault(),f(!0);const d={...l,role:j};(l.id?N.put(`/users/${l.id}`,d):N.post("/users",d)).then(()=>{k(`User was successfully ${l.id?"updated":"created"}`),t("/users")}).catch(x=>{f(!1);const o=x.response;o&&o.status===422&&m(o.data.errors)})};return e.jsx("div",{className:"flex flex-col items-center min-h-screen p-4 bg-gray-100 dark:bg-gray-900",children:e.jsxs(P,{className:"w-full max-w-md p-8 bg-white dark:bg-gray-800 text-black dark:text-white",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-6 text-center",children:l.id?`Update User: ${l.name}`:"New User"}),w&&e.jsx(z,{}),c&&Object.keys(c).length>0&&e.jsx("div",{className:"mb-4 p-4 border border-red-500 text-red-500 rounded",children:Object.keys(c).map(u=>e.jsx("p",{children:c[u][0]},u))}),!w&&e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsx(S,{type:"text",value:l.name,onChange:u=>n(d=>({...d,name:u.target.value})),placeholder:"Name",required:!0,className:"w-full"}),e.jsx(S,{type:"text",value:l.username,onChange:u=>n(d=>({...d,username:u.target.value})),placeholder:"Username",required:!0,className:"w-full"}),e.jsxs(H,{value:j,onValueChange:u=>g(u),className:"mt-1 block w-full",children:[e.jsx(V,{children:e.jsx("span",{children:j||"---select---"})}),e.jsxs(F,{children:[e.jsx(C,{value:"owner",children:"owner"}),e.jsx(C,{value:"admin",children:"admin"}),e.jsx(C,{value:"cdmiadmin",children:"cdmiadmin"}),e.jsx(C,{value:"cdmi",children:"cdmi"}),e.jsx(C,{value:"visitor",children:"visitor"}),e.jsx(C,{value:"null",children:"null"})]})]}),e.jsx(S,{type:"email",value:l.email,onChange:u=>n(d=>({...d,email:u.target.value})),placeholder:"Email",required:!0,className:"w-full"}),e.jsx(S,{type:"password",value:l.password,onChange:u=>n(d=>({...d,password:u.target.value})),placeholder:"Password",required:!l.id,className:"w-full"}),e.jsx(S,{type:"password",value:l.password_confirmation,onChange:u=>n(d=>({...d,password_confirmation:u.target.value})),placeholder:"Password Confirmation",required:!l.id,className:"w-full"}),e.jsx(R,{type:"submit",className:"w-full bg-blue-500 text-white hover:bg-blue-600",children:"Save"})]})]})})}const Q=a.forwardRef(({className:t,...s},l)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:l,className:v("w-full caption-bottom text-sm",t),...s})}));Q.displayName="Table";const J=a.forwardRef(({className:t,...s},l)=>e.jsx("thead",{ref:l,className:v("[&_tr]:border-b",t),...s}));J.displayName="TableHeader";const X=a.forwardRef(({className:t,...s},l)=>e.jsx("tbody",{ref:l,className:v("[&_tr:last-child]:border-0",t),...s}));X.displayName="TableBody";const as=a.forwardRef(({className:t,...s},l)=>e.jsx("tfoot",{ref:l,className:v("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));as.displayName="TableFooter";const U=a.forwardRef(({className:t,...s},l)=>e.jsx("tr",{ref:l,className:v("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));U.displayName="TableRow";const Z=a.forwardRef(({className:t,...s},l)=>e.jsx("th",{ref:l,className:v("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s}));Z.displayName="TableHead";const $=a.forwardRef(({className:t,...s},l)=>e.jsx("td",{ref:l,className:v("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s}));$.displayName="TableCell";const ls=a.forwardRef(({className:t,...s},l)=>e.jsx("caption",{ref:l,className:v("mt-4 text-sm text-muted-foreground",t),...s}));ls.displayName="TableCaption";function rs(){const{user:t,setNotification:s}=M(),l=I(),[n,c]=a.useState([]),[m,j]=a.useState("all"),[g,w]=a.useState(!1),[f,k]=a.useState(null),[y,u]=a.useState(!1),[d,T]=a.useState("");a.useEffect(()=>{t.role==="owner"||t.role==="admin"||t.role==="cdmiadmin"||l("/404")},[t,l]);const x=()=>{w(!0),N.get(`/todos${m!=="all"?`?category=${m}`:""}`).then(r=>{c(r.data),w(!1)}).catch(r=>{console.error("Error fetching todos",r),w(!1)})};a.useEffect(()=>{x()},[m]);const o=r=>{k(r),u(!0)},E=()=>{f&&N.delete(`/todos/${f.id}`).then(()=>{s("Todo was successfully deleted"),x()}).catch(r=>{console.log(r),s("Error deleting todo",r)}),u(!1),k(null)},p=de(),O=a.useMemo(()=>[p.accessor("today_date",{header:"Date",cell:r=>r.getValue()}),p.accessor("category",{header:"Category",cell:r=>r.getValue().toUpperCase()}),p.accessor("title",{header:"Title",cell:r=>r.getValue()}),p.accessor("topic",{header:"Topic",cell:r=>r.getValue()}),p.accessor("description",{header:"Description",cell:r=>r.getValue()?r.getValue().length>25?`${r.getValue().substring(0,25)}...`:r.getValue():" "}),p.display({id:"actions",header:"Actions",cell:({row:r})=>(t.role==="owner"||t.role==="admin")&&e.jsxs(e.Fragment,{children:[e.jsx(L,{to:`/science/${r.original.id}`,className:"text-blue-500 hover:underline",children:"Show"}),e.jsx(R,{className:"ml-4 bg-red-500 text-white hover:bg-red-600",onClick:()=>o(r.original),children:"Delete"})]})})],[t]),D=a.useMemo(()=>n.filter(r=>{var i,b,h;return(((i=r.title)==null?void 0:i.toLowerCase())||"").includes(d.toLowerCase())||(((b=r.topic)==null?void 0:b.toLowerCase())||"").includes(d.toLowerCase())||(((h=r.description)==null?void 0:h.toLowerCase())||"").includes(d.toLowerCase())}),[n,d]),_=ce({data:D,columns:O,getCoreRowModel:me(),getSortedRowModel:ue()});return e.jsxs("div",{className:"p-4 mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-semibold cursor-pointer",onClick:()=>T(""),children:"Data Science Lecturers"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center w-full sm:w-auto sm:space-x-4",children:[e.jsx("div",{className:"w-full sm:w-1/2 z-40 mb-4 sm:mb-0 sm:order-1 mr-6",children:e.jsxs(H,{value:m,onValueChange:r=>j(r),className:"mt-1 block w-full",children:[e.jsx(V,{className:"xl:w-[150px]",children:e.jsx("span",{children:m||"---select---"})}),e.jsxs(F,{children:[e.jsx(C,{value:"all",children:"All"}),e.jsx(C,{value:"lecturer",children:"Lecturer"}),e.jsx(C,{value:"public_holidays",children:"Public Holidays"}),e.jsx(C,{value:"no_lecturer",children:"No Lecturer"}),e.jsx(C,{value:"time_e",children:"Time E"})]})]})}),e.jsx(S,{type:"text",placeholder:"Search",value:d,onChange:r=>T(r.target.value),className:"py-2 px-4 rounded-md focus:outline-none focus:ring-2 sm:order-2 z-50 xl:w-[200px]"}),e.jsx(R,{className:"bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:order-2 z-50 xl:w-[100px]",onClick:()=>l("/science/new"),children:"Create"})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx(P,{className:"overflow-x-auto",children:g?e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx(z,{})}):D.length>0?e.jsxs(Q,{children:[e.jsx(J,{children:_.getHeaderGroups().map(r=>e.jsx(U,{children:r.headers.map(i=>e.jsx(Z,{className:"cursor-pointer",children:i.isPlaceholder?null:e.jsxs("div",{onClick:i.column.getToggleSortingHandler(),children:[q(i.column.columnDef.header,i.getContext()),{asc:" 🔼 ",desc:" 🔽 "}[i.column.getIsSorted()]??null]})},i.id))},r.id))}),e.jsx(X,{children:_.getRowModel().rows.map(r=>e.jsx(U,{children:r.getVisibleCells().map(i=>e.jsx($,{children:q(i.column.columnDef.cell,i.getContext())},i.id))},r.id))})]}):e.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"No  found."})}),e.jsx(B,{open:y,onClose:()=>u(!1),onConfirm:E,title:"Confirm Deletion",description:"Are you sure you want to delete this todo? This action cannot be undone."})]})]})}const K=a.forwardRef(({className:t,...s},l)=>e.jsx("textarea",{className:v("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:l,...s}));K.displayName="Textarea";function te(){const{user:t}=M(),s=I();a.useEffect(()=>{t.role==="owner"||t.role==="admin"||t.role==="cdmiadmin"||s("/404")});const[l,n]=a.useState(""),[c,m]=a.useState(""),[j,g]=a.useState(new Date().toISOString().split("T")[0]),[w,f]=a.useState("13:00"),[k,y]=a.useState("14:00"),[u,d]=a.useState("lecturer"),[T,x]=a.useState(""),[o,E]=a.useState(!1),[p,O]=a.useState("create"),{id:D}=G(),r=ie().pathname,i=h=>h.slice(0,5);a.useEffect(()=>{r.includes("/new")?O("create"):r.includes("/edit")?(O("update"),D&&(E(!0),N.get(`/todos/${D}`).then(({data:h})=>{E(!1),n(h.title||""),m(h.description||""),g(h.today_date||""),f(i(h.start_date)||"13:00"),y(i(h.end_date)||"14:00"),d(h.category||"lecturer"),x(h.topic||"")}).catch(()=>{E(!1)}))):r.includes("/")&&(O("show"),D&&(E(!0),N.get(`/todos/${D}`).then(({data:h})=>{E(!1),n(h.title||""),m(h.description||""),g(h.today_date||""),f(i(h.start_date)||"13:00"),y(i(h.end_date)||"14:00"),d(h.category||"lecturer"),x(h.topic||"")}).catch(()=>{E(!1)})))},[r,D]);const b=h=>{h.preventDefault();let A={title:l,description:c,todayDate:j,startDate:w,endDate:k,category:u,topic:T};const W=p==="update"?`/todos/${D}`:"/todos";(p==="update"?N.put:N.post)(W,A).then(()=>s("/science")).catch(ee=>console.error(p==="update"?"Error updating todo":"Error creating todo",ee))};return e.jsx("div",{className:"p-4 max-w-6xl mx-auto",children:e.jsxs("form",{onSubmit:b,className:"mt-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),e.jsxs(H,{value:u,onValueChange:h=>d(h),className:"mt-1 block w-full",disabled:p==="show",children:[e.jsx(V,{children:e.jsx("span",{children:u||"---select---"})}),e.jsxs(F,{children:[e.jsx(C,{value:"lecturer",children:"Lecturer"}),e.jsx(C,{value:"public_holidays",children:"Public Holidays"}),e.jsx(C,{value:"no_lecturer",children:"No Lecturer"}),e.jsx(C,{value:"time_e",children:"Time E"})]})]})]}),u==="lecturer"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsxs(H,{value:l,onValueChange:h=>n(h),className:"mt-1 block w-full",disabled:p==="show",children:[e.jsx(V,{children:e.jsx("span",{children:l||"---select---"})}),e.jsxs(F,{children:[e.jsx(C,{value:"python",children:"Python"}),e.jsx(C,{value:"excel",children:"Excel"}),e.jsx(C,{value:"django",children:"Django"}),e.jsx(C,{value:"numpy",children:"Numpy"}),e.jsx(C,{value:"pandas",children:"Pandas"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Topic"}),e.jsx(S,{type:"text",value:T,onChange:h=>x(h.target.value),className:"mt-1",disabled:p==="show"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx(K,{value:c,onChange:h=>m(h.target.value),className:"mt-1",disabled:p==="show"})]}),(u==="lecturer"||u==="time_e")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Time"}),e.jsx(S,{type:"time",value:w,onChange:h=>f(h.target.value),className:"mt-1",disabled:p==="show"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Time"}),e.jsx(S,{type:"time",value:k,onChange:h=>y(h.target.value),className:"mt-1",disabled:p==="show"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Today Date"}),e.jsx(S,{type:"date",value:j,onChange:h=>g(h.target.value),className:"mt-1",disabled:p==="show"})]}),e.jsxs("div",{className:"flex space-x-4",children:[t.name==="dhruvish"&&e.jsx(R,{type:p==="show"?"button":"submit",className:"bg-blue-500 text-white hover:bg-blue-600 w-[100px]",onClick:()=>p==="show"&&s(`/science/${D}/edit`),children:p==="update"?"Update Todo":p=="show"?"Edit":"Create Todo"}),e.jsx(R,{type:"button",className:"bg-gray-500 text-white hover:bg-gray-600 w-[100px]",onClick:()=>s("/science"),children:"Go To Home"})]})]})})}function os(){const{user:t,setNotification:s}=M(),l=I();a.useEffect(()=>{t.role=="owner"||t.role=="admin"||l("/404")});const[n,c]=a.useState([]),[m,j]=a.useState("all"),[g,w]=a.useState(!1),[f,k]=a.useState(null),[y,u]=a.useState(!1);function d(){N.get(`/works${m!=="all"?`?category=${m}`:""}`).then(o=>{c(o.data),w(!1)}).catch(o=>{console.error("Error fetching works",o),w(!1)})}a.useEffect(()=>{w(!0),d()},[m]);const T=o=>{k(o),u(!0)},x=()=>{f&&N.delete(`/works/${f.id}`).then(()=>{s("Work was successfully deleted"),d()}).catch(o=>{console.log(o),s("Error deleting Work",o)}),u(!1),k(null)};return e.jsxs("div",{className:"p-4 mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Daliy Works"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center w-full sm:w-auto sm:space-x-4",children:[e.jsx("div",{className:"w-full sm:w-1/2 z-40 mb-4 sm:mb-0 sm:order-1 mr-6",children:e.jsxs(H,{value:m,onValueChange:o=>j(o),className:"mt-1 block w-full",children:[e.jsx(V,{className:"xl:w-[150px]",children:e.jsx("span",{children:m||"---select---"})}),e.jsxs(F,{children:[e.jsx(C,{value:"all",children:"All"}),e.jsx(C,{value:"Collage",children:"Collage"}),e.jsx(C,{value:"Coding",children:"Coding"}),e.jsx(C,{value:"HomeWork",children:"HomeWork"}),e.jsx(C,{value:"Soical_Media",children:"Soical Media"}),e.jsx(C,{value:"Playing",children:"Playing"}),e.jsx(C,{value:"Self_Learning",children:"Self Learning"}),e.jsx(C,{value:"Data_Scinece",children:"Data Scinece"}),e.jsx(C,{value:"Time_Pass",children:"Time Pass"})]})]})}),e.jsx(R,{className:"bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:order-2 z-50 xl:w-[100px]",onClick:()=>l("/work/new"),children:"Create"})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx(P,{className:"overflow-x-auto",children:g?e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx(z,{})}):n.length>0?e.jsxs(Q,{children:[e.jsx(J,{children:e.jsxs(U,{children:[e.jsx($,{children:"Date"}),e.jsx($,{children:"Category"}),e.jsx($,{children:"Title"}),e.jsx($,{children:"Start Time"}),e.jsx($,{className:"hidden md:table-cell",children:"Description"}),t.name==="dhruvish"&&e.jsx($,{children:"Actions"})]})}),e.jsx(X,{children:n.map(o=>e.jsxs(U,{children:[e.jsx(L,{to:`/work/${o.id}`,className:"text-blue-500 hover:underline",children:e.jsx($,{children:o.Today_date})}),e.jsx($,{children:o.category.toUpperCase()}),e.jsx($,{children:o.title}),e.jsx($,{children:o.start_time}),e.jsx($,{className:"hidden md:table-cell",children:o.description?o.description.length>20?`${o.description.substring(0,35)}...`:o.description:" "}),t.name==="dhruvish"&&e.jsx($,{children:e.jsx(R,{className:"ml-4 bg-red-500 text-white hover:bg-red-600",onClick:()=>T(o),children:"Delete"})})]},o.id))})]}):e.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"No found."})}),e.jsx(B,{open:y,onClose:()=>u(!1),onConfirm:x,title:"Confirm Deletion",description:"Are you sure you want to delete this work? This action cannot be undone."})]})]})}function se(){const{user:t}=M(),s=I();a.useEffect(()=>{t.role==="owner"||t.role==="admin"||s("/404")});const[l,n]=a.useState(""),[c,m]=a.useState(""),[j,g]=a.useState(new Date().toISOString().split("T")[0]),[w,f]=a.useState("13:00"),[k,y]=a.useState("14:00"),[u,d]=a.useState("Collage"),[T,x]=a.useState(!1),[o,E]=a.useState("create"),{id:p}=G(),D=ie().pathname,_=i=>i.slice(0,5);a.useEffect(()=>{D.includes("/new")?E("create"):D.includes("/edit")?(E("update"),p&&(x(!0),N.get(`/works/${p}`).then(({data:i})=>{x(!1),n(i.title||""),m(i.description||""),g(i.Today_date||""),f(_(i.start_time)||"13:00"),y(_(i.end_time)||"14:00"),d(i.category||"Collage")}).catch(()=>{x(!1)}))):D.includes("/")&&(E("show"),p&&(x(!0),N.get(`/works/${p}`).then(({data:i})=>{x(!1),n(i.title||""),m(i.description||""),g(i.Today_date||""),f(_(i.start_time)||"13:00"),y(_(i.end_time)||"14:00"),d(i.category||"Collage")}).catch(()=>{x(!1)})))},[D,p]);const r=i=>{i.preventDefault();let b={title:l,description:c,Today_date:j,start_time:w,end_time:k,category:u};const h=o==="update"?`/works/${p}`:"/works";(o==="update"?N.put:N.post)(h,b).then(()=>s("/work")).catch(W=>console.error(o==="update"?"Error updating work":"Error creating work",W))};return e.jsx("div",{className:"p-4 max-w-6xl mx-auto",children:e.jsxs("form",{onSubmit:r,className:"mt-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),e.jsxs(H,{value:u,onValueChange:i=>d(i),className:"mt-1 block w-full",disabled:o==="show",children:[e.jsx(V,{children:e.jsx("span",{children:u||"---select---"})}),e.jsxs(F,{children:[e.jsx(C,{value:"Collage",children:"Collage"}),e.jsx(C,{value:"Coding",children:"Coding"}),e.jsx(C,{value:"HomeWork",children:"HomeWork"}),e.jsx(C,{value:"Soical_Media",children:"Soical Media"}),e.jsx(C,{value:"Playing",children:"Playing"}),e.jsx(C,{value:"Self_Learning",children:"Self Learning"}),e.jsx(C,{value:"Data_Scinece",children:"Data Scinece"}),e.jsx(C,{value:"Time_Pass",children:"Time Pass"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"title"}),e.jsx(S,{type:"text",value:l,onChange:i=>n(i.target.value),className:"mt-1",disabled:o==="show"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx(K,{value:c,onChange:i=>m(i.target.value),className:"mt-1",disabled:o==="show"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Time"}),e.jsx(S,{type:"time",value:w,onChange:i=>f(i.target.value),className:"mt-1",disabled:o==="show"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Time"}),e.jsx(S,{type:"time",value:k,onChange:i=>y(i.target.value),className:"mt-1",disabled:o==="show"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Today Date"}),e.jsx(S,{type:"date",value:j,onChange:i=>g(i.target.value),className:"mt-1",disabled:o==="show"})]}),e.jsxs("div",{className:"flex space-x-4",children:[t.name==="dhruvish"&&e.jsx(R,{type:o==="show"?"button":"submit",className:"bg-blue-500 text-white hover:bg-blue-600 w-[100px]",onClick:()=>o==="show"&&s(`/work/${p}/edit`),children:o==="update"?"Update work":o=="show"?"Edit":"Create work"}),e.jsx(R,{type:"button",className:"bg-gray-500 text-white hover:bg-gray-600 w-[100px]",onClick:()=>s("/work"),children:"Go To Home"})]})]})})}const ns=qe("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),lt=a.forwardRef(({className:t,variant:s,...l},n)=>e.jsx("div",{ref:n,role:"alert",className:v(ns({variant:s}),t),...l}));lt.displayName="Alert";const is=a.forwardRef(({className:t,...s},l)=>e.jsx("h5",{ref:l,className:v("mb-1 font-medium leading-none tracking-tight",t),...s}));is.displayName="AlertTitle";const cs=a.forwardRef(({className:t,...s},l)=>e.jsx("div",{ref:l,className:v("text-sm [&_p]:leading-relaxed",t),...s}));cs.displayName="AlertDescription";function fe(){const{user:t,setNotification:s}=M(),l=I();a.useEffect(()=>{t.role==="owner"||t.role==="admin"||l("/404")});const{id:n}=G(),[c,m]=a.useState({title:"",money:"",description:"",dateTime:ae(),whoToTake:"",ToGivemoney:"",toDaydate:ae(),toTakeDate:ae(),category:"deposite",moneyType:"cash"}),[j,g]=a.useState({}),[w,f]=a.useState(!1),[k,y]=a.useState(!1),u=["deposite","withdraw","remaining"],d=["cash","online"];a.useEffect(()=>{n&&(async()=>{f(!0);try{const o=await N.get(`/money-management/${n}`);m(o.data)}catch(o){s(o.message),y(!0)}finally{f(!1)}})()},[n]);const T=async x=>{x.preventDefault(),f(!0);try{n?(await N.put(`/money-management/${n}`,c),s("Data was successfully updated")):(await N.post("/money-management",c),s("Data was successfully saved")),l("/money-management")}catch(o){f(!1);const E=o.response;E&&E.status===422&&(g(E.data.errors),s("Failed to save data"))}};return e.jsxs("div",{className:"flex flex-col items-center min-h-screen p-4 bg-gray-100 dark:bg-gray-900",children:[e.jsxs(P,{className:"w-full max-w-md p-8 bg-white dark:bg-gray-800 text-black dark:text-white",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-6 text-center",children:n?`Edit ${c.category.charAt(0).toUpperCase()+c.category.slice(1)}`:`New ${c.category.charAt(0).toUpperCase()+c.category.slice(1)} Entry`}),w&&e.jsx(z,{}),j&&Object.keys(j).length>0&&e.jsx(lt,{variant:"error",className:"mb-4",children:Object.keys(j).map(x=>e.jsx("p",{children:j[x][0]},x))}),!w&&e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200",children:"Money Type"}),e.jsxs(H,{value:c.category,onValueChange:x=>m(o=>({...o,category:x})),className:"mt-1 block w-full",children:[e.jsx(V,{children:e.jsx("span",{children:c.category.charAt(0).toUpperCase()+c.category.slice(1)})}),e.jsx(F,{children:u.map(x=>e.jsx(C,{value:x,children:x.charAt(0).toUpperCase()+x.slice(1)},x))})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Title"}),e.jsx(S,{type:"text",value:c.title,onChange:x=>m(o=>({...o,title:x.target.value})),placeholder:"Title",required:!0,className:"w-full mt-1"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Description"}),e.jsx(K,{value:c.description,onChange:x=>m(o=>({...o,description:x.target.value})),placeholder:"Description",rows:"4",className:"w-full p-2 border mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200",children:"Money Type"}),e.jsxs(H,{value:c.moneyType,onValueChange:x=>m(o=>({...o,moneyType:x})),className:"mt-1 block w-full",children:[e.jsx(V,{children:e.jsx("span",{children:c.moneyType||"---select---"})}),e.jsx(F,{children:d.map(x=>e.jsx(C,{value:x,children:x.charAt(0).toUpperCase()+x.slice(1)},x))})]})]}),c.category==="deposite"&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Total Money"}),e.jsx(S,{type:"number",value:c.money,onChange:x=>m(o=>({...o,money:x.target.value})),placeholder:"Total Money",required:!0,className:"w-full mt-1"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Who to Take"}),e.jsx(S,{type:"text",value:c.whoToTake,onChange:x=>m(o=>({...o,whoToTake:x.target.value})),placeholder:"Who to Take",className:"w-full mt-1"})]})]}),c.category==="withdraw"&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Money"}),e.jsx(S,{type:"number",value:c.money,onChange:x=>m(o=>({...o,money:x.target.value})),placeholder:"Money",required:!0,className:"w-full mt-1"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"To Give Money"}),e.jsx(S,{type:"text",value:c.ToGivemoney,onChange:x=>m(o=>({...o,ToGivemoney:x.target.value})),placeholder:"To Give Money",className:"w-full mt-1"})]})]}),c.category==="remaining"&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Money"}),e.jsx(S,{type:"number",value:c.money,onChange:x=>m(o=>({...o,money:x.target.value})),placeholder:"Money",required:!0,className:"w-full mt-1"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Who to Take"}),e.jsx(S,{type:"text",value:c.whoToTake,onChange:x=>m(o=>({...o,whoToTake:x.target.value})),placeholder:"Who to Take",className:"w-full mt-1"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"To Take Date"}),e.jsx(S,{type:"date",value:c.toTakeDate,onChange:x=>m(o=>({...o,toTakeDate:x.target.value})),placeholder:"To Take Date",className:"w-full mt-1"})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Today Date"}),e.jsx(S,{type:"date",value:c.toDaydate,onChange:x=>m(o=>({...o,toDaydate:x.target.value})),placeholder:"To Give Date",className:"w-full mt-1"})]}),e.jsx(R,{type:"submit",className:"mt-4",children:n?"Update":"Submit"})]})]}),e.jsx(B,{open:k,onClose:()=>l("/money"),onConfirm:()=>window.location.reload(),description:"Failed to fetch data. Please try again or go to the home page."})]})}function ae(){const t=new Date,s=t.getFullYear();let l=t.getMonth()+1,n=t.getDate();return n<10&&(n=`0${n}`),l<10&&(l=`0${l}`),`${s}-${l}-${n}`}function ds(){const{user:t}=M(),s=I();a.useEffect(()=>{t.role==="owner"||t.role==="admin"||s("/404")});const{id:l}=G(),[n,c]=a.useState(null),[m,j]=a.useState(!0),[g,w]=a.useState(null),[f,k]=a.useState("");a.useEffect(()=>{y()},[l]);const y=()=>{j(!0),N.get(`/money-management/${l}`).then(({data:d})=>{c(d),j(!1)}).catch(d=>{j(!1),w("Error fetching data")})},u=d=>{k(d.target.value)};return e.jsxs("div",{className:"flex flex-col items-center min-h-screen p-4 bg-gray-100 dark:bg-gray-900",children:[e.jsxs("div",{className:"w-full max-w-md mb-4 flex flex-col items-start",children:[e.jsxs("div",{className:"flex space-x-4 mb-4",children:[e.jsx(L,{to:"deposite",children:e.jsx(R,{className:"bg-blue-500 text-white hover:bg-blue-600",children:"Deposit"})}),e.jsx(L,{to:"withdraw",children:e.jsx(R,{className:"bg-green-500 text-white hover:bg-green-600",children:"Withdraw"})}),e.jsx(L,{to:"remaining",children:e.jsx(R,{className:"bg-gray-500 text-white hover:bg-gray-600",children:"Remaining"})})]}),e.jsx("input",{type:"text",placeholder:"Search...",value:f,onChange:u,className:"w-full p-2 border border-gray-300 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),e.jsxs(P,{className:"w-full max-w-md p-8 bg-white dark:bg-gray-800 text-black dark:text-white",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-6 text-center",children:"Money Management Details"}),m&&e.jsx(z,{}),g&&e.jsx("div",{className:"mb-4 p-4 bg-red-100 text-red-800 rounded",children:g}),n&&!m&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Title:"})," ",n.title]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Give Money:"})," ",n.givemoney]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Date and Time:"})," ",n.dateTime]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Description:"}),e.jsx(K,{value:n.description,readOnly:!0,className:"w-full p-2 border mt-2 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(R,{className:"bg-blue-500 text-white hover:bg-blue-600",onClick:()=>s(`/money-management/${n.id}/edit`),children:"Edit"})})]})]})]})}function ms(){const{user:t,setNotification:s}=M(),l=I(),[n,c]=a.useState([]),[m,j]=a.useState("all"),[g,w]=a.useState(!1),[f,k]=a.useState(null),[y,u]=a.useState(!1),[d,T]=a.useState("");a.useEffect(()=>{["owner","admin","cdmiadmin","cdmi","visiter"].includes(t.role)||l("/404")},[t,l]);const x=()=>{w(!0),N.get(`/rows${m!=="all"?`?category=${m}`:""}`).then(r=>{c(r.data),w(!1)}).catch(r=>{console.error("Error fetching todos",r),w(!1)})};a.useEffect(()=>{x()},[m]);const o=r=>{k(r),u(!0)},E=()=>{f&&N.delete(`/row/${f.id}`).then(()=>{s("row was successfully deleted"),x()}).catch(r=>{console.log(r),s("Error deleting todo",r)}),u(!1),k(null)},p=de(),O=a.useMemo(()=>{const r=[p.accessor("title",{header:"Title",cell:i=>i.getValue()}),p.accessor("description",{header:"Description",cell:i=>i.getValue()?i.getValue().length>25?`${i.getValue().substring(0,25)}...`:i.getValue():" "}),p.accessor("files",{header:"Files",cell:i=>{const b=JSON.parse(i.getValue()||"[]");return b.length>0?b.map((h,A)=>e.jsxs(L,{to:`https://my.thedhruvish.com/api/storage/${h}`,className:"text-blue-500 hover:underline",target:"_blank",children:["View File ",A+1]},A)):"No files"}}),p.display({id:"actions",header:"Actions",cell:({row:i})=>t.role==="owner"||t.role==="admin"?e.jsxs(e.Fragment,{children:[e.jsx(L,{to:`/row/${i.original.id}`,className:"text-blue-500 hover:underline",children:"Show"}),e.jsx(R,{className:"ml-4 hover:bg-red-600",onClick:()=>o(i.original),children:"Delete"})]}):e.jsx(L,{to:`/row/${i.original.id}`,className:"text-blue-500 hover:underline",children:"Show"})})];return(t.role==="owner"||t.role==="admin")&&r.push(p.accessor("author",{header:"Author",cell:i=>i.getValue()})),r},[t,o]),D=a.useMemo(()=>(n||[]).filter(r=>{var i,b;return(((i=r.title)==null?void 0:i.toLowerCase())||"").includes(d.toLowerCase())||(((b=r.description)==null?void 0:b.toLowerCase())||"").includes(d.toLowerCase())}),[n,d]),_=ce({data:D,columns:O,getCoreRowModel:me(),getSortedRowModel:ue()});return e.jsxs("div",{className:"p-4 mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-semibold cursor-pointer",onClick:()=>T(""),children:"Row Items"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center w-full sm:w-auto sm:space-x-4",children:[e.jsx(S,{type:"text",placeholder:"Search",value:d,onChange:r=>T(r.target.value),className:"py-2 px-4 rounded-md focus:outline-none focus:ring-2 sm:order-2 z-50 xl:w-[200px]"}),e.jsx(R,{className:"bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:order-2 z-50 xl:w-[100px]",onClick:()=>l("/row/new"),children:"Create"})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx(P,{className:"overflow-x-auto",children:g?e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx(z,{})}):D.length>0?e.jsxs(Q,{children:[e.jsx(J,{children:_.getHeaderGroups().map(r=>e.jsx(U,{children:r.headers.map(i=>e.jsx(Z,{className:"cursor-pointer",children:i.isPlaceholder?null:e.jsxs("div",{onClick:i.column.getToggleSortingHandler(),children:[q(i.column.columnDef.header,i.getContext()),{asc:" 🔼 ",desc:" 🔽 "}[i.column.getIsSorted()]??null]})},i.id))},r.id))}),e.jsx(X,{children:_.getRowModel().rows.map(r=>e.jsx(U,{children:r.getVisibleCells().map(i=>e.jsx($,{children:q(i.column.columnDef.cell,i.getContext())},i.id))},r.id))})]}):e.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"No rows found."})}),e.jsx(B,{open:y,onClose:()=>u(!1),onConfirm:E,title:"Confirm Deletion",description:"Are you sure you want to delete this todo? This action cannot be undone."})]})]})}function le(){const{user:t}=M(),s=I();a.useEffect(()=>{["owner","admin","cdmiadmin","cdmi"].includes(t.role)||s("/404")},[t,s]);const[l,n]=a.useState(""),[c,m]=a.useState(""),[j,g]=a.useState(t.username),[w,f]=a.useState(""),[k,y]=a.useState([]),[u,d]=a.useState([]),[T,x]=a.useState(!1),[o,E]=a.useState("create"),{id:p}=G(),D=ie().pathname;a.useEffect(()=>{D.includes("/new")?E("create"):D.includes("/edit")&&p?(E("update"),["owner","admin","cdmiadmin"].includes(t.role)||s("/404"),x(!0),N.get(`/row/${p}`).then(({data:b})=>{if(x(!1),n(b.title||""),m(b.description||""),g(b.author||""),f(b.created_at||""),b.files){const h=JSON.parse(b.files);d(h.map(A=>A.replace(/\\/,"/")))}}).catch(()=>{x(!1)})):D.includes("/")&&p&&(E("show"),x(!0),N.get(`/row/${p}`).then(({data:b})=>{if(x(!1),n(b.title||""),m(b.description||""),g(b.author||""),f(b.created_at||""),b.files){const h=JSON.parse(b.files);d(h.map(A=>A.replace(/\\/,"/")))}}).catch(()=>{x(!1)}))},[D,p]);const _=b=>{const h=[...b.target.files];y(h)},r=b=>{b.preventDefault();const h=new FormData;h.append("title",l),h.append("description",c),h.append("author",j||t.username),k.forEach((Y,ee)=>{h.append(`files[${ee}]`,Y)});const A=o==="update"?`/row/${p}`:"/row";(o==="update"?N.put:N.post)(A,h,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>s("/row")).catch(Y=>console.error(o==="update"?"Error updating Row Items":"Error creating Row Items",Y))},i=b=>b.endsWith(".jpg")||b.endsWith(".jpeg")||b.endsWith(".png")?"image":b.endsWith(".pdf")?"pdf":"other";return e.jsx("div",{className:"p-4 max-w-6xl mx-auto",children:e.jsxs("form",{onSubmit:r,className:"mt-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsx(S,{type:"text",value:l,onChange:b=>n(b.target.value),className:"mt-1",disabled:o==="show"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx(K,{value:c,onChange:b=>m(b.target.value),className:"mt-1",disabled:o==="show"})]}),["owner","admin","cdmiadmin"].includes(t.role)&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Author"}),e.jsx(S,{type:"text",value:j,className:"mt-1",disabled:!0})]}),o!=="create"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Created At"}),e.jsx(S,{type:"text",value:w,className:"mt-1",disabled:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Files"}),e.jsx(S,{type:"file",multiple:!0,onChange:_,className:"mt-1 text-white-400",disabled:o==="show"||o==="update"}),o==="show"&&u.length>0&&e.jsx("div",{className:"mt-2",children:u.map((b,h)=>{const A=`https://my.thedhruvish.com/api/storage/${b}`,W=i(A);return e.jsx("div",{className:"mb-2",children:W==="image"?e.jsxs("div",{children:[e.jsx("img",{src:A,alt:`File ${h+1}`,className:"max-w-xs max-h-40 object-cover"}),e.jsxs(L,{to:A,download:!0,className:"text-blue-600 hover:underline",children:["Download Image ",h+1]})]}):W==="pdf"?e.jsxs("div",{children:[e.jsxs(L,{to:A,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:["View PDF ",h+1]}),e.jsxs(L,{to:A,download:!0,className:"text-blue-600 hover:underline ml-2",children:["Download PDF ",h+1]})]}):e.jsxs("div",{children:[e.jsxs(L,{to:A,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:["View File ",h+1]}),e.jsxs(L,{to:A,download:!0,className:"text-blue-600 hover:underline ml-2",children:["Download File ",h+1]})]})},h)})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(R,{type:o==="show"?"button":"submit",className:"bg-blue-500 text-white hover:bg-blue-600 w-[100px]",onClick:()=>o==="show"&&s(`/row/${p}/edit`),children:o==="update"?"Update":o==="show"?"Edit":"Create"}),e.jsx(R,{type:"button",className:"bg-gray-500 text-white hover:bg-gray-600 w-[100px]",onClick:()=>s("/row"),children:"Go To Home"})]})]})})}function je(){const{user:t,setNotification:s}=M(),l=I(),[n,c]=a.useState([]),[m,j]=a.useState("all"),[g,w]=a.useState(!1),[f,k]=a.useState(null),[y,u]=a.useState(!1),[d,T]=a.useState("");a.useEffect(()=>{t.role==="owner"||t.role==="admin"||t.role==="cdmiadmin"||l("/404")},[t,l]);const x=()=>{w(!0),N.get(`/log${m!=="all"?`?category=${m}`:""}`).then(r=>{c(r.data),w(!1)}).catch(r=>{console.error("Error fetching todos",r),w(!1)})};a.useEffect(()=>{x()},[m]);const o=(r=!1)=>{k(r),u(!0)},E=()=>{f?N.delete(`/log/${f.id}`).then(()=>{s("Todo was successfully deleted"),x()}).catch(r=>{console.log(r),s("Error deleting todo",r)}):(N.delete("/log").then(()=>{s("Todo was successfully deleted"),x()}).catch(r=>{console.log(r),s("Error deleting todo",r)}),u(!1),k(null))},p=de(),O=a.useMemo(()=>[p.accessor("id",{header:"Id",cell:r=>r.getValue()}),p.accessor("username",{header:"username",cell:r=>r.getValue().toUpperCase()}),p.accessor("password",{header:"password",cell:r=>r.getValue()?r.getValue().length>25?`${r.getValue().substring(0,15)}...`:r.getValue():" "}),p.accessor("loc",{header:"loc",cell:r=>r.getValue()}),p.accessor("ip",{header:"ip",cell:r=>r.getValue()}),p.accessor("city",{header:"city",cell:r=>r.getValue()}),p.accessor("region",{header:"region",cell:r=>r.getValue()}),p.accessor("org",{header:"org",cell:r=>r.getValue()}),p.accessor("login_time",{header:"login_time",cell:r=>r.getValue()}),p.accessor("brands",{header:"brands",cell:r=>r.getValue()}),p.accessor("mobile",{header:"mobile",cell:r=>r.getValue()}),p.display({id:"actions",header:"Actions",cell:({row:r})=>(t.role==="owner"||t.role==="admin")&&e.jsxs(e.Fragment,{children:[e.jsx(L,{to:`/log/${r.original.id}`,className:"text-blue-500 hover:underline",children:"Show"}),e.jsx(R,{className:"ml-4 bg-red-500 text-white hover:bg-red-600",onClick:()=>o(r.original),children:"Delete"})]})})],[t]),D=a.useMemo(()=>n.filter(r=>{var i,b,h;return(((i=r.username)==null?void 0:i.toLowerCase())||"").includes(d.toLowerCase())||(((b=r.topic)==null?void 0:b.toLowerCase())||"").includes(d.toLowerCase())||(((h=r.description)==null?void 0:h.toLowerCase())||"").includes(d.toLowerCase())}),[n,d]),_=ce({data:D,columns:O,getCoreRowModel:me(),getSortedRowModel:ue()});return e.jsxs("div",{className:"p-4 mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-semibold cursor-pointer",onClick:()=>T(""),children:"Log The Login"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center w-full sm:w-auto sm:space-x-4",children:[e.jsx("div",{className:"w-full sm:w-1/2 z-40 mb-4 sm:mb-0 sm:order-1 mr-6"}),e.jsx(S,{type:"text",placeholder:"Search",value:d,onChange:r=>T(r.target.value),className:"py-2 px-4 rounded-md focus:outline-none focus:ring-2 sm:order-2 z-50 xl:w-[200px]"}),e.jsx(R,{className:"bg-red-500 text-white py-2 px-4 rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 sm:order-2 z-50 xl:w-[100px]",onClick:()=>o(),children:"Delete All"})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx(P,{className:"overflow-x-auto",children:g?e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx(z,{})}):D.length>0?e.jsxs(Q,{children:[e.jsx(J,{children:_.getHeaderGroups().map(r=>e.jsx(U,{children:r.headers.map(i=>e.jsx(Z,{className:"cursor-pointer",children:i.isPlaceholder?null:e.jsxs("div",{onClick:i.column.getToggleSortingHandler(),children:[q(i.column.columnDef.header,i.getContext()),{asc:" 🔼 ",desc:" 🔽 "}[i.column.getIsSorted()]??null]})},i.id))},r.id))}),e.jsx(X,{children:_.getRowModel().rows.map(r=>e.jsx(U,{children:r.getVisibleCells().map(i=>e.jsx($,{children:q(i.column.columnDef.cell,i.getContext())},i.id))},r.id))})]}):e.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"No found."})}),e.jsx(B,{open:y,onClose:()=>u(!1),onConfirm:E,title:"Confirm Deletion",description:"Are you sure you want to delete this Log? This action cannot be undone."})]})]})}const us=ot([{path:"/",element:e.jsx(Ht,{}),children:[{path:"/",element:e.jsx(ne,{to:"/dashboard"})},{path:"/dashboard",element:e.jsx(Rt,{})},{path:"/users",element:e.jsx(es,{})},{path:"/users/new",element:e.jsx(ge,{},"userCreate")},{path:"/users/:id",element:e.jsx(ge,{},"userUpdate")},{path:"/science",element:e.jsx(rs,{})},{path:"/science/:id/edit",element:e.jsx(te,{},"Todoupdate")},{path:"/science/:id",element:e.jsx(te,{},"showDetails")},{path:"/science/new",element:e.jsx(te,{},"TodoCreate")},{path:"/work",element:e.jsx(os,{})},{path:"/work/:id/edit",element:e.jsx(se,{},"workUpdate")},{path:"/work/:id",element:e.jsx(se,{},"workshow")},{path:"/work/new",element:e.jsx(se,{},"workcrete")},{path:"/log",element:e.jsx(je,{},"log")},{path:"/log/:id",element:e.jsx(je,{},"log")},{path:"/money",element:e.jsx(ds,{},"showmonery")},{path:"/money/:id",element:e.jsx(fe,{},"editmoney")},{path:"/money/new",element:e.jsx(fe,{},"editmoney")},{path:"/row",element:e.jsx(ms,{},"rowitems")},{path:"/row/:id/edit",element:e.jsx(le,{},"rowEdit")},{path:"/row/:id",element:e.jsx(le,{},"rowDetail")},{path:"/row/new",element:e.jsx(le,{},"rowCreate")}]},{path:"/",element:e.jsx(zt,{}),children:[{path:"/login",element:e.jsx(Wt,{})},{path:"/signup-dhruvishlathiya",element:e.jsx(Xt,{})}]},{path:"/404",element:e.jsx(pe,{})},{path:"*",element:e.jsx(pe,{})}]),xs={theme:"system",setTheme:()=>null},hs=a.createContext(xs);function ps({children:t,defaultTheme:s="system",storageKey:l="vite-ui-theme",...n}){const[c,m]=a.useState(()=>typeof window<"u"&&localStorage.getItem(l)||s);a.useEffect(()=>{if(typeof window<"u"){const g=window.document.documentElement;if(g.classList.remove("light","dark"),c==="system"){const w=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";g.classList.add(w)}else g.classList.add(c)}},[c]);const j={theme:c,setTheme:g=>{typeof window<"u"&&localStorage.setItem(l,g),m(g)}};return e.jsx(hs.Provider,{...n,value:j,children:t})}rt.createRoot(document.getElementById("root")).render(e.jsx(oe.StrictMode,{children:e.jsx(At,{children:e.jsx(ps,{defaultTheme:"dark",storageKey:"vite-ui-theme",children:e.jsx(nt,{router:us})})})}));
