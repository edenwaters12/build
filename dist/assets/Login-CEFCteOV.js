import{r as n,j as t}from"./react-Dzin6bBt.js";import{u as w,a as s}from"./index-B14-NT0x.js";import{I as b}from"./input-nng-uUd-.js";import{B as v}from"./button-Co5OAmAE.js";import"./exenv-BTN8Bl8p.js";import"./react-dom-vuVZB_ht.js";import"./scheduler-CzFDRTuY.js";import"./react-router-dom-BJiSrDzD.js";import"./react-router-CsBO2-kY.js";import"./@remix-run-CDTKzl14.js";import"./axios-CCb-kr4I.js";import"./@radix-ui-DNVY2g9C.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-fK1ikR0O.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-C0y-sxxv.js";import"./react-style-singleton-CNUZfl4K.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-BGkMMORt.js";import"detect-node-es";import"./use-callback-ref-CM22xisT.js";import"./@floating-ui-B50KHoMa.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-Dnoi3Axr.js";import"./lucide-react-DVh0U7qo.js";import"./class-variance-authority-Bb4qSo10.js";function K(){const i=n.useRef(),l=n.useRef(),{setUser:c,setToken:p}=w(),[d,a]=n.useState(null),[u,m]=n.useState(!1),h=f=>{f.preventDefault(),m(!0);const x=navigator.userAgent;let g={};"userAgentData"in navigator?navigator.userAgentData.getHighEntropyValues(["platform","brands"]).then(e=>(g={platform:navigator.platform,language:navigator.language,online:navigator.onLine,screenWidth:window.screen.width,screenHeight:window.screen.height,cookiesEnabled:navigator.cookieEnabled,hardwareConcurrency:navigator.hardwareConcurrency,deviceMemory:navigator.deviceMemory,brands:e.brands.map(r=>r.brand).join(", "),mobile:/Mobi|Android/i.test(navigator.userAgent)},s.get("https://ipinfo.io/json?token=9b203c2cebb8bc"))).then(({data:e})=>{const r={username:i.current.value,password:l.current.value,data:e,more:g};return s.post("/login",r)}).then(({data:e})=>{c(e.user),p(e.token)}).catch(e=>{var r,o;console.error("Error during login:",e),a(((o=(r=e.response)==null?void 0:r.data)==null?void 0:o.message)||"Failed to log in. Please try again.")}).finally(()=>{m(!1)}):(console.log("User agent data is not supported in this browser."),a("User agent data is not supported in this browser."),s.get("/get-ipinfo").then(({data:e})=>{const r={...e,browser:x},o={username:i.current.value,password:l.current.value,data:r};return console.log("Fallback Payload for login:"),s.post("/login",o)}).then(({data:e})=>{c(e.user),p(e.token)}).catch(e=>{var r,o;console.error("Error during fallback login:",e),a(((o=(r=e.response)==null?void 0:r.data)==null?void 0:o.message)||"Failed to log in. Please try again.")}).finally(()=>{m(!1)}))};return t.jsx("div",{className:"flex justify-center items-center min-h-screen",children:t.jsx("div",{className:"w-[360px] relative z-10 bg-black max-w-[360px] p-8 shadow-sm",children:t.jsxs("form",{onSubmit:h,children:[t.jsx("h1",{className:"text-lg mb-4 text-center",children:"WelCome"}),t.jsx(b,{ref:i,type:"text",placeholder:"Enter your username",className:"block w-full mb-4 p-2 border rounded",name:"username",required:!0}),t.jsx(b,{ref:l,type:"password",placeholder:"Enter Password",className:"block w-full mb-4 p-2 border rounded",name:"password",required:!0}),t.jsx(v,{className:"w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-sky-700",disabled:u,onClick:()=>a(""),children:u?"Logging in...":"Login"}),t.jsx("br",{}),d&&t.jsx("div",{className:"mt-4 text-[#ae1212]  text-center text-xl",children:t.jsx("h3",{children:d})})]})})})}export{K as default};
