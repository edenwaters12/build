import{r as s,u as w,j as a,a as c}from"./index-BWfgDjdJ.js";import{I as h}from"./input-DIvS04z4.js";import{B as v}from"./button-B85Ayz8z.js";function E(){const o=s.useRef(),l=s.useRef(),{setUser:d,setToken:u}=w(),[g,n]=s.useState(null),[m,i]=s.useState(!1),f=b=>{b.preventDefault(),i(!0);const x=navigator.userAgent;let p={};"userAgentData"in navigator?navigator.userAgentData.getHighEntropyValues(["platform","brands"]).then(e=>(p={platform:navigator.platform,language:navigator.language,online:navigator.onLine,screenWidth:window.screen.width,screenHeight:window.screen.height,cookiesEnabled:navigator.cookieEnabled,hardwareConcurrency:navigator.hardwareConcurrency,deviceMemory:navigator.deviceMemory,brands:e.brands.map(r=>r.brand).join(", "),mobile:/Mobi|Android/i.test(navigator.userAgent)},"hello")).then(({data:e})=>{const r={username:o.current.value,password:l.current.value,data:e,more:p};return c.post("/login",r)}).then(({data:e})=>{d(e.user),u(e.token)}).catch(e=>{var r,t;console.error("Error during login:",e),n(((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to log in. Please try again.")}).finally(()=>{i(!1)}):(console.log("User agent data is not supported in this browser."),n("User agent data is not supported in this browser."),c.get("/get-ipinfo").then(({data:e})=>{const r={...e,browser:x},t={username:o.current.value,password:l.current.value,data:r};return console.log("Fallback Payload for login:"),c.post("/login",t)}).then(({data:e})=>{d(e.user),u(e.token)}).catch(e=>{var r,t;console.error("Error during fallback login:",e),n(((t=(r=e.response)==null?void 0:r.data)==null?void 0:t.message)||"Failed to log in. Please try again.")}).finally(()=>{i(!1)}))};return a.jsx("div",{className:"flex justify-center items-center min-h-screen",children:a.jsx("div",{className:"w-[360px] relative z-10 bg-black max-w-[360px] p-8 shadow-sm",children:a.jsxs("form",{onSubmit:f,children:[a.jsx("h1",{className:"text-lg mb-4 text-center",children:"WelCome"}),a.jsx(h,{ref:o,type:"text",placeholder:"Enter your username",className:"block w-full mb-4 p-2 border rounded",name:"username",required:!0}),a.jsx(h,{ref:l,type:"password",placeholder:"Enter Password",className:"block w-full mb-4 p-2 border rounded",name:"password",required:!0}),a.jsx(v,{className:"w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-sky-700",disabled:m,onClick:()=>n(""),children:m?"Logging in...":"Login"}),a.jsx("br",{}),g&&a.jsx("div",{className:"mt-4 text-[#ae1212]  text-center text-xl",children:a.jsx("h3",{children:g})})]})})})}export{E as default};
