import{r as l,j as e}from"./react-Dzin6bBt.js";import{u as b,a as p}from"./index-tA_CkrcO.js";import{I as n}from"./input-RTTy6w2K.js";import{B as N}from"./button-DzNIufI-.js";import{C as y}from"./card-i-PQbjv3.js";import{L as C}from"./Loader-BO7wm5pM.js";import{S,a as U,b as k,c as o}from"./select-C6-oVS-l.js";import{c as q,g as E}from"./react-router-DZbvGhyJ.js";import"./exenv-BTN8Bl8p.js";import"./react-dom-vuVZB_ht.js";import"./scheduler-CzFDRTuY.js";import"./react-router-dom-1oKpTQ5_.js";import"./@remix-run-DxFES9XG.js";import"./axios-CCb-kr4I.js";import"./@radix-ui-DSbTQSaq.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-fK1ikR0O.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-C0y-sxxv.js";import"./react-style-singleton-CNUZfl4K.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-BGkMMORt.js";import"detect-node-es";import"./use-callback-ref-CM22xisT.js";import"./@floating-ui-hWHCA-rQ.js";import"./clsx-B-dksMZM.js";import"./tailwind-merge-Dnoi3Axr.js";import"./lucide-react-DVh0U7qo.js";import"./class-variance-authority-Bb4qSo10.js";function oe(){const h=q(),{id:c}=E(),[r,a]=l.useState({id:null,name:"",username:"",role:"null",email:"",password:"",password_confirmation:""}),[m,g]=l.useState({}),[d,x]=l.useState("null"),[f,i]=l.useState(!1),{setNotification:j}=b();l.useEffect(()=>{c&&(i(!0),p.get(`/users/${c}`).then(({data:s})=>{i(!1),a(s),x(s.role)}).catch(()=>{i(!1)}))},[c]),l.useEffect(()=>{document.documentElement.classList.add("dark")},[]);const v=s=>{s.preventDefault(),i(!0);const t={...r,role:d};(r.id?p.put(`/users/${r.id}`,t):p.post("/users",t)).then(()=>{j(`User was successfully ${r.id?"updated":"created"}`),h("/users")}).catch(w=>{i(!1);const u=w.response;u&&u.status===422&&g(u.data.errors)})};return e.jsx("div",{className:"flex flex-col items-center min-h-screen p-4 bg-gray-100 dark:bg-gray-900",children:e.jsxs(y,{className:"w-full max-w-md p-8 bg-white dark:bg-gray-800 text-black dark:text-white",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-6 text-center",children:r.id?`Update User: ${r.name}`:"New User"}),f&&e.jsx(C,{}),m&&Object.keys(m).length>0&&e.jsx("div",{className:"mb-4 p-4 border border-red-500 text-red-500 rounded",children:Object.keys(m).map(s=>e.jsx("p",{children:m[s][0]},s))}),!f&&e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsx(n,{type:"text",value:r.name,onChange:s=>a(t=>({...t,name:s.target.value})),placeholder:"Name",required:!0,className:"w-full"}),e.jsx(n,{type:"text",value:r.username,onChange:s=>a(t=>({...t,username:s.target.value})),placeholder:"Username",required:!0,className:"w-full"}),e.jsxs(S,{value:d,onValueChange:s=>x(s),className:"mt-1 block w-full",children:[e.jsx(U,{children:e.jsx("span",{children:d||"---select---"})}),e.jsxs(k,{children:[e.jsx(o,{value:"owner",children:"owner"}),e.jsx(o,{value:"admin",children:"admin"}),e.jsx(o,{value:"cdmiadmin",children:"cdmiadmin"}),e.jsx(o,{value:"cdmi",children:"cdmi"}),e.jsx(o,{value:"visitor",children:"visitor"}),e.jsx(o,{value:"null",children:"null"})]})]}),e.jsx(n,{type:"email",value:r.email,onChange:s=>a(t=>({...t,email:s.target.value})),placeholder:"Email",required:!0,className:"w-full"}),e.jsx(n,{type:"password",value:r.password,onChange:s=>a(t=>({...t,password:s.target.value})),placeholder:"Password",required:!r.id,className:"w-full"}),e.jsx(n,{type:"password",value:r.password_confirmation,onChange:s=>a(t=>({...t,password_confirmation:s.target.value})),placeholder:"Password Confirmation",required:!r.id,className:"w-full"}),e.jsx(N,{type:"submit",className:"w-full bg-blue-500 text-white hover:bg-blue-600",children:"Save"})]})]})})}export{oe as default};
