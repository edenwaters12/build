import{r as m,j as e,e as u,u as S,b as M,c as $,a as y}from"./index-B6VFRoYa.js";import{I as i}from"./input-DT9QYlrm.js";import{c as F,B as E}from"./button-vPB1129l.js";import{C as G}from"./card-DlZ6Gr13.js";import{L as U}from"./Loader-DtSdq5OF.js";import{T as q}from"./textarea-BmtAzkla.js";import{A as O}from"./AlertDialogDemo-B3vBEhXR.js";import{S as f,a as j,b as v,c as b}from"./select-NvCuLxV1.js";const R=F("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),N=m.forwardRef(({className:c,variant:o,...l},r)=>e.jsx("div",{ref:r,role:"alert",className:u(R({variant:o}),c),...l}));N.displayName="Alert";const V=m.forwardRef(({className:c,...o},l)=>e.jsx("h5",{ref:l,className:u("mb-1 font-medium leading-none tracking-tight",c),...o}));V.displayName="AlertTitle";const W=m.forwardRef(({className:c,...o},l)=>e.jsx("div",{ref:l,className:u("text-sm [&_p]:leading-relaxed",c),...o}));W.displayName="AlertDescription";function J(){const{user:c,setNotification:o}=S(),l=M();m.useEffect(()=>{c.role==="owner"||c.role==="admin"||l("/404")});const{id:r}=$(),[s,n]=m.useState({title:"",money:"",description:"",dateTime:h(),whoToTake:"",ToGivemoney:"",toDaydate:h(),toTakeDate:h(),category:"deposite",moneyType:"cash"}),[d,k]=m.useState({}),[p,x]=m.useState(!1),[T,w]=m.useState(!1),D=["deposite","withdraw","remaining"],C=["cash","online"];m.useEffect(()=>{r&&(async()=>{x(!0);try{const t=await y.get(`/money-management/${r}`);n(t.data)}catch(t){o(t.message),w(!0)}finally{x(!1)}})()},[r,o]);const A=async a=>{a.preventDefault(),x(!0);try{r?(await y.put(`/money-management/${r}`,s),o("Data was successfully updated")):(await y.post("/money-management",s),o("Data was successfully saved")),l("/money-management")}catch(t){x(!1);const g=t.response;g&&g.status===422&&(k(g.data.errors),o("Failed to save data"))}};return e.jsxs("div",{className:"flex flex-col items-center min-h-screen p-4 bg-gray-100 dark:bg-gray-900",children:[e.jsxs(G,{className:"w-full max-w-md p-8 bg-white dark:bg-gray-800 text-black dark:text-white",children:[e.jsx("h1",{className:"text-2xl font-semibold mb-6 text-center",children:r?`Edit ${s.category.charAt(0).toUpperCase()+s.category.slice(1)}`:`New ${s.category.charAt(0).toUpperCase()+s.category.slice(1)} Entry`}),p&&e.jsx(U,{}),d&&Object.keys(d).length>0&&e.jsx(N,{variant:"error",className:"mb-4",children:Object.keys(d).map(a=>e.jsx("p",{children:d[a][0]},a))}),!p&&e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200",children:"Money Type"}),e.jsxs(f,{value:s.category,onValueChange:a=>n(t=>({...t,category:a})),className:"mt-1 block w-full",children:[e.jsx(j,{children:e.jsx("span",{children:s.category.charAt(0).toUpperCase()+s.category.slice(1)})}),e.jsx(v,{children:D.map(a=>e.jsx(b,{value:a,children:a.charAt(0).toUpperCase()+a.slice(1)},a))})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Title"}),e.jsx(i,{type:"text",value:s.title,onChange:a=>n(t=>({...t,title:a.target.value})),placeholder:"Title",required:!0,className:"w-full mt-1"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Description"}),e.jsx(q,{value:s.description,onChange:a=>n(t=>({...t,description:a.target.value})),placeholder:"Description",rows:"4",className:"w-full p-2 border mt-1"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium dark:text-gray-200",children:"Money Type"}),e.jsxs(f,{value:s.moneyType,onValueChange:a=>n(t=>({...t,moneyType:a})),className:"mt-1 block w-full",children:[e.jsx(j,{children:e.jsx("span",{children:s.moneyType||"---select---"})}),e.jsx(v,{children:C.map(a=>e.jsx(b,{value:a,children:a.charAt(0).toUpperCase()+a.slice(1)},a))})]})]}),s.category==="deposite"&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Total Money"}),e.jsx(i,{type:"number",value:s.money,onChange:a=>n(t=>({...t,money:a.target.value})),placeholder:"Total Money",required:!0,className:"w-full mt-1"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Who to Take"}),e.jsx(i,{type:"text",value:s.whoToTake,onChange:a=>n(t=>({...t,whoToTake:a.target.value})),placeholder:"Who to Take",className:"w-full mt-1"})]})]}),s.category==="withdraw"&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Money"}),e.jsx(i,{type:"number",value:s.money,onChange:a=>n(t=>({...t,money:a.target.value})),placeholder:"Money",required:!0,className:"w-full mt-1"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"To Give Money"}),e.jsx(i,{type:"text",value:s.ToGivemoney,onChange:a=>n(t=>({...t,ToGivemoney:a.target.value})),placeholder:"To Give Money",className:"w-full mt-1"})]})]}),s.category==="remaining"&&e.jsxs(e.Fragment,{children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Money"}),e.jsx(i,{type:"number",value:s.money,onChange:a=>n(t=>({...t,money:a.target.value})),placeholder:"Money",required:!0,className:"w-full mt-1"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Who to Take"}),e.jsx(i,{type:"text",value:s.whoToTake,onChange:a=>n(t=>({...t,whoToTake:a.target.value})),placeholder:"Who to Take",className:"w-full mt-1"})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"To Take Date"}),e.jsx(i,{type:"date",value:s.toTakeDate,onChange:a=>n(t=>({...t,toTakeDate:a.target.value})),placeholder:"To Take Date",className:"w-full mt-1"})]})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-200",children:"Today Date"}),e.jsx(i,{type:"date",value:s.toDaydate,onChange:a=>n(t=>({...t,toDaydate:a.target.value})),placeholder:"To Give Date",className:"w-full mt-1"})]}),e.jsx(E,{type:"submit",className:"mt-4",children:r?"Update":"Submit"})]})]}),e.jsx(O,{open:T,onClose:()=>l("/money"),onConfirm:()=>window.location.reload(),description:"Failed to fetch data. Please try again or go to the home page."})]})}function h(){const c=new Date,o=c.getFullYear();let l=c.getMonth()+1,r=c.getDate();return r<10&&(r=`0${r}`),l<10&&(l=`0${l}`),`${o}-${l}-${r}`}export{J as default};
