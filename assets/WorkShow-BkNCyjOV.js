import{u as y,c as k,r as a,j as e,B as j,C as T,b as D,f as W,g as A,h as f,m as l,l as E,L,A as _,a as g}from"./index-C80r3nWj.js";import{S as $,a as P,b as B,c as t}from"./select-Xjabn7IN.js";function I(){const{user:i,setNotification:d}=y(),r=k();a.useEffect(()=>{["owner","work"].some(s=>i.role.includes(s))||r("/404")},[i,r]);const[x,p]=a.useState([]),[n,b]=a.useState("all"),[v,c]=a.useState(!1),[h,m]=a.useState(null),[C,o]=a.useState(!1);function u(){g.get(`/works${n!=="all"?`?category=${n}`:""}`).then(s=>{p(s.data),c(!1)}).catch(s=>{console.error("Error fetching works",s),c(!1)})}a.useEffect(()=>{c(!0),u()},[n]);const S=s=>{m(s),o(!0)},w=()=>{h&&g.delete(`/works/${h.id}`).then(()=>{d("Work was successfully deleted"),u()}).catch(s=>{d("Error deleting Work",s)}),o(!1),m(null)};return e.jsxs("div",{className:"p-4 mx-auto",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Daliy Works"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center w-full sm:w-auto sm:space-x-4",children:[e.jsx("div",{className:"w-full sm:w-1/2 mb-4 sm:mb-0 sm:order-1 mr-6",children:e.jsxs($,{value:n,onValueChange:s=>b(s),className:"mt-1 block w-full",children:[e.jsx(P,{className:"xl:w-[150px]",children:e.jsx("span",{children:n||"---select---"})}),e.jsxs(B,{children:[e.jsx(t,{value:"all",children:"All"}),e.jsx(t,{value:"Collage",children:"Collage"}),e.jsx(t,{value:"Coding",children:"Coding"}),e.jsx(t,{value:"HomeWork",children:"HomeWork"}),e.jsx(t,{value:"Soical_Media",children:"Soical Media"}),e.jsx(t,{value:"Playing",children:"Playing"}),e.jsx(t,{value:"Self_Learning",children:"Self Learning"}),e.jsx(t,{value:"Data_Scinece",children:"Data Scinece"}),e.jsx(t,{value:"Time_Pass",children:"Time Pass"})]})]})}),e.jsx(j,{className:"bg-blue-500 text-white py-2 px-4 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 sm:order-2 xl:w-[100px]",onClick:()=>r("/work/new"),children:"Create"})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx(T,{className:"overflow-x-auto",children:v?e.jsx("div",{className:"flex items-center justify-center p-4",children:e.jsx(D,{})}):x.length>0?e.jsxs(W,{children:[e.jsx(A,{children:e.jsxs(f,{children:[e.jsx(l,{children:"Date"}),e.jsx(l,{children:"Category"}),e.jsx(l,{children:"Title"}),e.jsx(l,{children:"Start Time"}),e.jsx(l,{className:"hidden md:table-cell",children:"Description"}),e.jsx(l,{children:"Actions"})]})}),e.jsx(E,{children:x.map(s=>e.jsxs(f,{children:[e.jsx(l,{children:e.jsx(L,{to:`/work/${s.id}`,className:"text-blue-500 hover:underline",children:s.Today_date})}),e.jsx(l,{children:s.category.toUpperCase()}),e.jsx(l,{children:s.title}),e.jsx(l,{children:s.start_time}),e.jsx(l,{className:"hidden md:table-cell",children:s.description?s.description.length>20?`${s.description.substring(0,35)}...`:s.description:" "}),["owner","work-d"].some(N=>i.role.includes(N))&&e.jsx(l,{children:e.jsx(j,{className:"ml-4 bg-red-500 text-white hover:bg-red-600",onClick:()=>S(s),children:"Delete"})})]},s.id))})]}):e.jsx("div",{className:"p-4 text-center text-gray-500 dark:text-gray-400",children:"No found."})}),e.jsx(_,{open:C,onClose:()=>o(!1),onConfirm:w,title:"Confirm Deletion",description:"Are you sure you want to delete this work? This action cannot be undone."})]})]})}export{I as default};
