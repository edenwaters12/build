import{c as k,d as y,r as c,u as C,a as p,j as s,C as E,b as U,I as d,B as q}from"./index-C80r3nWj.js";function R(){const w=k(),{id:u}=y(),[t,r]=c.useState({id:null,name:"",username:"",email:"",password:"",password_confirmation:""}),[i,b]=c.useState({}),[o,h]=c.useState({row:!1,"row-e":!1,"row-d":!1,science:!1,"data-c":!1,data:!1,log:!1,work:!1,"log-c":!1,"work-c":!1,"data-e":!1,"log-e":!1,"work-e":!1,"data-d":!1,"log-d":!1,"work-d":!1,beta:!1}),[x,n]=c.useState(!1),{setNotification:j}=C();c.useEffect(()=>{u&&(n(!0),p.get(`/users/${u}`).then(({data:e})=>{n(!1),r(e);const a={...o};e.roles.split(",").forEach(l=>{a[l]&&(a[l]=!0)}),h(a)}).catch(()=>{n(!1)}))},[u,o]),c.useEffect(()=>{document.documentElement.classList.add("dark")},[]);const N=e=>{const{name:a,checked:l}=e.target;h(g=>({...g,[a]:l}))},v=e=>{e.preventDefault(),n(!0);const a=Object.keys(o).filter(m=>o[m]).join(","),l={...t,role:a};(t.id?p.put(`/users/${t.id}`,l):p.post("/users",l)).then(()=>{j(`User was successfully ${t.id?"updated":"created"}`),w("/users")}).catch(m=>{n(!1);const f=m.response;f&&f.status===422&&b(f.data.errors)})};return s.jsx("div",{className:"flex flex-col items-center min-h-screen p-4 bg-gray-100 dark:bg-gray-900",children:s.jsxs(E,{className:"w-full max-w-md p-8 bg-white dark:bg-gray-800 text-black dark:text-white",children:[s.jsx("h1",{className:"text-2xl font-semibold mb-6 text-center",children:t.id?`Update User: ${t.name}`:"New User"}),x&&s.jsx(U,{}),i&&Object.keys(i).length>0&&s.jsx("div",{className:"mb-4 p-4 border border-red-500 text-red-500 rounded",children:Object.keys(i).map(e=>s.jsx("p",{children:i[e][0]},e))}),!x&&s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[s.jsx(d,{type:"text",value:t.name,onChange:e=>r(a=>({...a,name:e.target.value})),placeholder:"Name",required:!0,className:"w-full"}),s.jsx(d,{type:"text",value:t.username,onChange:e=>r(a=>({...a,username:e.target.value})),placeholder:"Username",required:!0,className:"w-full"}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h2",{className:"font-semibold mb-2",children:"Roles"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4",children:Object.keys(o).map(e=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",name:e,checked:o[e],onChange:N,className:"form-checkbox h-5 w-5 text-blue-600 transition duration-150 ease-in-out"}),s.jsx("span",{className:"ml-2 capitalize",children:e.replace("-"," ")})]},e))})]}),s.jsx(d,{type:"email",value:t.email,onChange:e=>r(a=>({...a,email:e.target.value})),placeholder:"Email",required:!0,className:"w-full"}),s.jsx(d,{type:"password",value:t.password,onChange:e=>r(a=>({...a,password:e.target.value})),placeholder:"Password",required:!t.id,className:"w-full"}),s.jsx(d,{type:"password",value:t.password_confirmation,onChange:e=>r(a=>({...a,password_confirmation:e.target.value})),placeholder:"Password Confirmation",required:!t.id,className:"w-full"}),s.jsx(q,{type:"submit",className:"w-full bg-blue-500 text-white hover:bg-blue-600",children:"Save"})]})]})})}export{R as default};
