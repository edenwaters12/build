import{u as F,b as H,r as a,c as V,d as G,a as u,j as e}from"./index-Bg1UFyfG.js";import{T as M}from"./textarea-jeQ0B5m9.js";import{B as k}from"./button-CSgnsCXw.js";import{I as x}from"./input-Dq0MWHsb.js";import{S as E,a as _,b as $,c as l}from"./select-B3XGCj4C.js";function Q(){const{user:n}=F(),c=H();a.useEffect(()=>{["owner","science"].some(t=>n.role.includes(t))||c("/404")},[n,c]);const[h,p]=a.useState(""),[w,j]=a.useState(""),[S,b]=a.useState(new Date().toISOString().split("T")[0]),[C,g]=a.useState("13:00"),[T,f]=a.useState("14:00"),[i,v]=a.useState("lecturer"),[D,y]=a.useState(""),[O,r]=a.useState(!1),[s,N]=a.useState("create"),{id:o}=V(),d=G().pathname,m=t=>t.slice(0,5);a.useEffect(()=>{d.includes("/new")?N("create"):d.includes("/edit")?(["owner","science-e"].some(t=>n.role.includes(t))||c("/404"),N("update"),o&&(r(!0),u.get(`/todos/${o}`).then(({data:t})=>{r(!1),p(t.title||""),j(t.description||""),b(t.today_date||""),g(m(t.start_date)||"13:00"),f(m(t.end_date)||"14:00"),v(t.category||"lecturer"),y(t.topic||"")}).catch(()=>{r(!1)}))):d.includes("/")&&(N("show"),o&&(r(!0),u.get(`/todos/${o}`).then(({data:t})=>{r(!1),p(t.title||""),j(t.description||""),b(t.today_date||""),g(m(t.start_date)||"13:00"),f(m(t.end_date)||"14:00"),v(t.category||"lecturer"),y(t.topic||"")}).catch(()=>{r(!1)})))},[d,o,n.role,c]);const I=t=>{t.preventDefault();let L={title:h,description:w,todayDate:S,startDate:C,endDate:T,category:i,topic:D};const P=s==="update"?`/todos/${o}`:"/todos";(s==="update"?u.put:u.post)(P,L).then(()=>c("/science")).catch(B=>console.error(s==="update"?"Error updating todo":"Error creating todo",B))};return e.jsx("div",{className:"p-4 max-w-6xl mx-auto",children:e.jsxs("form",{onSubmit:I,className:"mt-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),e.jsxs(E,{value:i,onValueChange:t=>v(t),className:"mt-1 block w-full",disabled:s==="show",children:[e.jsx(_,{children:e.jsx("span",{children:i||"---select---"})}),e.jsxs($,{children:[e.jsx(l,{value:"lecturer",children:"Lecturer"}),e.jsx(l,{value:"public_holidays",children:"Public Holidays"}),e.jsx(l,{value:"no_lecturer",children:"No Lecturer"}),e.jsx(l,{value:"time_e",children:"Time E"})]})]})]}),i==="lecturer"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Title"}),e.jsxs(E,{value:h,onValueChange:t=>p(t),className:"mt-1 block w-full",disabled:s==="show",children:[e.jsx(_,{children:e.jsx("span",{children:h||"---select---"})}),e.jsxs($,{children:[e.jsx(l,{value:"python",children:"Python"}),e.jsx(l,{value:"excel",children:"Excel"}),e.jsx(l,{value:"django",children:"Django"}),e.jsx(l,{value:"numpy",children:"Numpy"}),e.jsx(l,{value:"pandas",children:"Pandas"})]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Topic"}),e.jsx(x,{type:"text",value:D,onChange:t=>y(t.target.value),className:"mt-1",disabled:s==="show"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),e.jsx(M,{value:w,onChange:t=>j(t.target.value),className:"mt-1",disabled:s==="show"})]}),(i==="lecturer"||i==="time_e")&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Time"}),e.jsx(x,{type:"time",value:C,onChange:t=>g(t.target.value),className:"mt-1",disabled:s==="show"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Time"}),e.jsx(x,{type:"time",value:T,onChange:t=>f(t.target.value),className:"mt-1",disabled:s==="show"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Today Date"}),e.jsx(x,{type:"date",value:S,onChange:t=>b(t.target.value),className:"mt-1",disabled:s==="show"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(k,{type:s==="show"?"button":"submit",className:`bg-blue-500 text-white hover:bg-blue-600 w-[100px] ${!["owner","science-e"].some(t=>n.role.includes(t))&&s!=="create"?"hidden":""} `,onClick:()=>s==="show"&&c(`/science/${o}/edit`),children:["owner","science-e"].some(t=>n.role.includes(t))&&s!=="create"?s==="update"?"Update":s==="show"?"Edit":"Create":s==="create"?"Create":null}),e.jsx(k,{type:"button",className:"bg-gray-500 text-white hover:bg-gray-600 w-[100px]",onClick:()=>c("/science"),children:"Go To Home"})]})]})})}export{Q as default};
