import{u as P,b as $,r as a,c as I,d as L,a as d,j as t}from"./index-CrO11q5U.js";import{T as H}from"./textarea-hPiOaZmj.js";import{B as C}from"./button-CuqhUsHb.js";import{I as u}from"./input-B9ud5Mvz.js";import{S as M,a as W,b as B,c as l}from"./select-Bw1r3uQs.js";function A(){const{user:i}=P(),n=$();a.useEffect(()=>{i.role==="owner"||i.role==="admin"||n("/404")});const[v,x]=a.useState(""),[y,h]=a.useState(""),[S,g]=a.useState(new Date().toISOString().split("T")[0]),[k,p]=a.useState("13:00"),[N,b]=a.useState("14:00"),[f,j]=a.useState("Collage"),[F,r]=a.useState(!1),[s,w]=a.useState("create"),{id:o}=I(),c=L().pathname,m=e=>e.slice(0,5);a.useEffect(()=>{c.includes("/new")?w("create"):c.includes("/edit")?(["owner","work-e"].some(e=>i.role.includes(e))||n("/404"),w("update"),o&&(r(!0),d.get(`/works/${o}`).then(({data:e})=>{r(!1),x(e.title||""),h(e.description||""),g(e.Today_date||""),p(m(e.start_time)||"13:00"),b(m(e.end_time)||"14:00"),j(e.category||"Collage")}).catch(()=>{r(!1)}))):c.includes("/")&&(w("show"),o&&(r(!0),d.get(`/works/${o}`).then(({data:e})=>{r(!1),x(e.title||""),h(e.description||""),g(e.Today_date||""),p(m(e.start_time)||"13:00"),b(m(e.end_time)||"14:00"),j(e.category||"Collage")}).catch(()=>{r(!1)})))},[c,o,i.role,n]);const T=e=>{e.preventDefault();let _={title:v,description:y,Today_date:S,start_time:k,end_time:N,category:f};const E=s==="update"?`/works/${o}`:"/works";(s==="update"?d.put:d.post)(E,_).then(()=>n("/work")).catch(D=>console.error(s==="update"?"Error updating work":"Error creating work",D))};return t.jsx("div",{className:"p-4 max-w-6xl mx-auto",children:t.jsxs("form",{onSubmit:T,className:"mt-4",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),t.jsxs(M,{value:f,onValueChange:e=>j(e),className:"mt-1 block w-full",disabled:s==="show",children:[t.jsx(W,{children:t.jsx("span",{children:f||"---select---"})}),t.jsxs(B,{children:[t.jsx(l,{value:"Collage",children:"Collage"}),t.jsx(l,{value:"Coding",children:"Coding"}),t.jsx(l,{value:"HomeWork",children:"HomeWork"}),t.jsx(l,{value:"Soical_Media",children:"Soical Media"}),t.jsx(l,{value:"Playing",children:"Playing"}),t.jsx(l,{value:"Self_Learning",children:"Self Learning"}),t.jsx(l,{value:"Data_Scinece",children:"Data Scinece"}),t.jsx(l,{value:"Time_Pass",children:"Time Pass"})]})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"title"}),t.jsx(u,{type:"text",value:v,onChange:e=>x(e.target.value),className:"mt-1",disabled:s==="show"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),t.jsx(H,{value:y,onChange:e=>h(e.target.value),className:"mt-1",disabled:s==="show"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Time"}),t.jsx(u,{type:"time",value:k,onChange:e=>p(e.target.value),className:"mt-1",disabled:s==="show"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Time"}),t.jsx(u,{type:"time",value:N,onChange:e=>b(e.target.value),className:"mt-1",disabled:s==="show"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Today Date"}),t.jsx(u,{type:"date",value:S,onChange:e=>g(e.target.value),className:"mt-1",disabled:s==="show"})]}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsx(C,{type:s==="show"?"button":"submit",className:`bg-blue-500 text-white hover:bg-blue-600 w-[100px] ${!["owner","work-e"].some(e=>i.role.includes(e))&&s!=="create"?"hidden":""} `,onClick:()=>s==="show"&&n(`/work/${o}/edit`),children:["owner","work-e"].some(e=>i.role.includes(e))&&s!=="create"?s==="update"?"Update":s==="show"?"Edit":"Create":s==="create"?"Create":null}),t.jsx(C,{type:"button",className:"bg-gray-500 text-white hover:bg-gray-600 w-[100px]",onClick:()=>n("/work"),children:"Go To Home"})]})]})})}export{A as default};
