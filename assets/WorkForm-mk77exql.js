import{u as P,c as $,r as a,d as I,q as L,a as m,j as t,I as u,s as H,B as C}from"./index-C80r3nWj.js";import{S as M,a as W,b as B,c as l}from"./select-Xjabn7IN.js";function U(){const{user:i}=P(),n=$();a.useEffect(()=>{i.role==="owner"||i.role==="admin"||n("/404")});const[v,x]=a.useState(""),[y,h]=a.useState(""),[S,g]=a.useState(new Date().toISOString().split("T")[0]),[k,b]=a.useState("13:00"),[N,j]=a.useState("14:00"),[p,w]=a.useState("Collage"),[q,c]=a.useState(!1),[s,f]=a.useState("create"),{id:o}=I(),r=L().pathname,d=e=>e.slice(0,5);a.useEffect(()=>{r.includes("/new")?f("create"):r.includes("/edit")?(["owner","work-e"].some(e=>i.role.includes(e))||n("/404"),f("update"),o&&(c(!0),m.get(`/works/${o}`).then(({data:e})=>{c(!1),x(e.title||""),h(e.description||""),g(e.Today_date||""),b(d(e.start_time)||"13:00"),j(d(e.end_time)||"14:00"),w(e.category||"Collage")}).catch(()=>{c(!1)}))):r.includes("/")&&(f("show"),o&&(c(!0),m.get(`/works/${o}`).then(({data:e})=>{c(!1),x(e.title||""),h(e.description||""),g(e.Today_date||""),b(d(e.start_time)||"13:00"),j(d(e.end_time)||"14:00"),w(e.category||"Collage")}).catch(()=>{c(!1)})))},[r,o,i.role,n]);const _=e=>{e.preventDefault();let T={title:v,description:y,Today_date:S,start_time:k,end_time:N,category:p};const E=s==="update"?`/works/${o}`:"/works";(s==="update"?m.put:m.post)(E,T).then(()=>n("/work")).catch(D=>console.error(s==="update"?"Error updating work":"Error creating work",D))};return t.jsx("div",{className:"p-4 max-w-6xl mx-auto",children:t.jsxs("form",{onSubmit:_,className:"mt-4",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),t.jsxs(M,{value:p,onValueChange:e=>w(e),className:"mt-1 block w-full",disabled:s==="show",children:[t.jsx(W,{children:t.jsx("span",{children:p||"---select---"})}),t.jsxs(B,{children:[t.jsx(l,{value:"Collage",children:"Collage"}),t.jsx(l,{value:"Coding",children:"Coding"}),t.jsx(l,{value:"HomeWork",children:"HomeWork"}),t.jsx(l,{value:"Soical_Media",children:"Soical Media"}),t.jsx(l,{value:"Playing",children:"Playing"}),t.jsx(l,{value:"Self_Learning",children:"Self Learning"}),t.jsx(l,{value:"Data_Scinece",children:"Data Scinece"}),t.jsx(l,{value:"Time_Pass",children:"Time Pass"})]})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"title"}),t.jsx(u,{type:"text",value:v,onChange:e=>x(e.target.value),className:"mt-1",disabled:s==="show"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),t.jsx(H,{value:y,onChange:e=>h(e.target.value),className:"mt-1",disabled:s==="show"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Start Time"}),t.jsx(u,{type:"time",value:k,onChange:e=>b(e.target.value),className:"mt-1",disabled:s==="show"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"End Time"}),t.jsx(u,{type:"time",value:N,onChange:e=>j(e.target.value),className:"mt-1",disabled:s==="show"})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Today Date"}),t.jsx(u,{type:"date",value:S,onChange:e=>g(e.target.value),className:"mt-1",disabled:s==="show"})]}),t.jsxs("div",{className:"flex space-x-4",children:[t.jsx(C,{type:s==="show"?"button":"submit",className:`bg-blue-500 text-white hover:bg-blue-600 w-[100px] ${!["owner","work-e"].some(e=>i.role.includes(e))&&s!=="create"?"hidden":""} `,onClick:()=>s==="show"&&n(`/work/${o}/edit`),children:["owner","work-e"].some(e=>i.role.includes(e))&&s!=="create"?s==="update"?"Update":s==="show"?"Edit":"Create":s==="create"?"Create":null}),t.jsx(C,{type:"button",className:"bg-gray-500 text-white hover:bg-gray-600 w-[100px]",onClick:()=>n("/work"),children:"Go To Home"})]})]})})}export{U as default};
